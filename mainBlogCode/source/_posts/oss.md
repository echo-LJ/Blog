---
title: 阿里云分片上传oss
date: 2023-04-25 14:55:51
tags: oss
---


<meta name="referrer" content="no-referrer"/>

### 阿里云分片上传的原理

* 1、客户端将文件分割成多个小文件，通常每个小文件大小为1MB-10MB,并上传到阿里云oss中。
* 2、阿里云收到小文件，进行MD5校验，确保上传的数据准确无误。
* 3、当所有的小文件完成后，客户端向阿里云发送一个合并请求。
* 4、阿里云oss收到请求后，会将所有小文件按照指定顺序合并成一个完成的文件，并存储到指定的Bucket中。

### 分块上传如何如何保证中间不丢数据：


使用阿里云OSS SDK的分片上传功能，`无需手动进行块编号和排序操作`，SDK会自动处理这些问题

**预防几种情况：**

* `块上传失败`: 当一个小块上传失败时，需要重新上传，成功之后需要进行MD5检验，确保是正确的数据。
* `块上传顺序混乱`: 在上传多个小块的时候，需要按照编号顺序上传，否则合并后的文件将出现错误。OSS SDK自动确保分块按照其编号升序上传。
* `块上传被取消`: 在分块上传过程中，如果出现了错误或者用户取消了上传操作，需要取消未完成的块上传。
* `上传块的顺序变化`:  上传顺序的变化会导致文件合并出错，因此在进行分块上传时，需要确保上传顺序的不变性。

* 上传完成，

在进行阿里云分片上传时，客户端需要按照指定的大小分割文件，并设置并发上传数，以确保上传的效率和稳定性。同时，阿里云OSS也提供了断点续传和秒传等功能，进一步提高了分片上传的效果和性能。

MD5是什么？
bucket是什么？



