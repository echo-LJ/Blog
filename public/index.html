<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="blog">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-vueI18" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/vueI18/" class="article-date">
  <time datetime="2020-07-27T09:24:07.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/vueI18/">vueé¡¹ç›®ä¸­å¼•å…¥&amp;ä½¿ç”¨å›½é™…åŒ–</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>å›½é™…åŒ–æ€è·¯ï¼šå°†å½“å‰è¯­è¨€ä»£ç -å›½å®¶åœ°åŒºå¯¹ç…§è¡¨ï¼ˆzh-CNï¼‰æ”¾åˆ°cookieä¸­å’Œvuexä¸­,æ¯æ¬¡é€šè¿‡è¯»å–cookie&amp;vuexä¸­çš„è¯­è¨€ä»£ç ï¼Œæ¥å±•ç¤ºå¯¹åº”çš„è¯­è¨€åŒ…ï¼Œåœ¨åˆ‡æ¢è¯­è¨€çš„æ—¶å€™å°†è¯­è¨€ä»£ç å­˜å…¥åˆ°cookie&amp;vuexä¸­ï¼ˆä¿è¯åˆ·æ–°é¡µé¢åèƒ½è®°ä½ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ï¼‰ã€‚<br>####å¼•å…¥vue-i18n&amp;vuex&amp;js-cookie<br>vue-i18næ˜¯vueå›½é™…åŒ–ä¾èµ–åŒ…,vuexæ˜¯çŠ¶æ€ç®¡ç†ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save vue-i18n vuex js-cookie</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>åœ¨main.jsä¸­æ³¨å†Œå¼•å…¥å³å¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import VueI18n from &apos;vue-i18n&apos;</span><br><span class="line">import Cookies from &apos;js-cookie&apos;</span><br><span class="line">Vue.use(VueI18n)</span><br><span class="line">import store from &apos;vuex&apos;</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  i18n,</span><br><span class="line">  store,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å°ç¼–æ˜¯å°†å…¶æ”¾åœ¨store&amp;langä¹‹ä¸­,åœ¨main.jsä¸­å¼•å…¥ä¸¤ä¸ªæ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import store from &apos;./store&apos;</span><br><span class="line">import i18n from &apos;./lang&apos;</span><br><span class="line">// ç”±äºè¿™é‡Œç”¨åˆ°äº†elementç»„ä»¶åº“ï¼Œè¿™é‡Œéœ€è¦çš„åŒå­¦è‡ªè¡Œå®‰è£…element-ui</span><br><span class="line">// npm install element-ui</span><br><span class="line">//  Vue.use(Element, &#123;</span><br><span class="line">//  i18n: (key, value) =&gt; i18n.t(key, value)</span><br><span class="line">// &#125;)</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  router,</span><br><span class="line">  i18n,</span><br><span class="line">  store,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>langæ–‡ä»¶å¤¹ï¼šå½“å‰ä»¥ä¸­è‹±æ–‡ä¸ºä¾‹ï¼Œéœ€è¦æ”¯æŒå¤šä¸ªè¯­è¨€åˆ™å¯æ·»åŠ åŒçº§è¯­è¨€åŒ…ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lang</span><br><span class="line">  |--index.js   //ä¸»æ–‡ä»¶</span><br><span class="line">  |</span><br><span class="line">  |-- zh.js      //ä¸­æ–‡è¯­è¨€åŒ…</span><br><span class="line">  |</span><br><span class="line">  |-- zh.js      //è‹±æ–‡è¯­è¨€åŒ…</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">`index.js`</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import VueI18n from &apos;vue-i18n&apos;</span><br><span class="line">import Cookies from &apos;js-cookie&apos;</span><br><span class="line">import elementEnLocale from &apos;element-ui/lib/locale/lang/en&apos; // element-ui lang</span><br><span class="line">import elementZhLocale from &apos;element-ui/lib/locale/lang/zh-CN&apos;// element-ui lang</span><br><span class="line">import enLocale from &apos;./en&apos;</span><br><span class="line">import zhLocale from &apos;./zh&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(VueI18n)</span><br><span class="line"></span><br><span class="line">const messages = &#123;</span><br><span class="line">  en-US: &#123;</span><br><span class="line">    ...enLocale,</span><br><span class="line">    ...elementEnLocale</span><br><span class="line">  &#125;,</span><br><span class="line">  zh-CN: &#123;</span><br><span class="line">    ...zhLocale,</span><br><span class="line">    ...elementZhLocale</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const i18n = new VueI18n(&#123;</span><br><span class="line">  locale: Cookies.get(&apos;language&apos;) || &apos;en-US&apos;,</span><br><span class="line">  messages</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export default i18n</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">`zh.js`</span><br><span class="line">  export default &#123;</span><br><span class="line">  login: &#123;</span><br><span class="line">    title: &apos;æ¬¢è¿&apos;</span><br><span class="line">    logIn: &apos;ç™»å½•&apos;</span><br><span class="line"> &#125;</span><br><span class="line">`en.js`</span><br><span class="line">export default &#123;</span><br><span class="line">  login: &#123;</span><br><span class="line">    title: &apos;Welcome&apos;,</span><br><span class="line">    logIn: &apos;Log in&apos;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å®ä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;&#123;&#123;$t(&apos;login.title&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">// åœ¨è¯­è¨€ä»£ç ä¸ºä¸­æ–‡ï¼ˆzh-CNï¼‰æ—¶,åˆ™å±•ç¤ºä¸ºï¼šæ¬¢è¿</span><br><span class="line">// åœ¨è¯­è¨€ä»£ç ä¸ºè‹±æ–‡ï¼ˆen-USï¼‰æ—¶,åˆ™å±•ç¤ºä¸ºï¼šWelcome&apos;</span><br></pre></td></tr></table></figure></p>
<p>storeæ–‡ä»¶å¤¹ï¼švue&amp;cookieä¸­å­˜å…¥è¯­è¨€ä»£ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">store</span><br><span class="line">  |--index.js   //ä¸»æ–‡ä»¶</span><br><span class="line">  |</span><br><span class="line">  |-- modules      //vuexå­æ¨¡å—æ–‡ä»¶</span><br><span class="line">          |</span><br><span class="line">          |-- language.js      //è¯­è¨€</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">`index.js`</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Vuex from &apos;vuex&apos;</span><br><span class="line">import language from &apos;./modules/language&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">const store = new Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    language</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export default store</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">`language.js  `</span><br><span class="line">import Cookies from &apos;js-cookie&apos;</span><br><span class="line">import Cookies from &apos;js-cookie&apos;</span><br><span class="line"></span><br><span class="line">const app = &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    language: Cookies.get(&apos;language&apos;) || &apos;en-US&apos; // é¡¹ç›®åˆå§‹åŒ–æ—¶ï¼Œé»˜è®¤ä¸ºè‹±æ–‡</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    SET_LANGUAGE: (state, language) =&gt; &#123;</span><br><span class="line">      state.language = language</span><br><span class="line">      Cookies.set(&apos;language&apos;, language)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    language: state =&gt; state.language</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    setLanguage(&#123; commit &#125;, language) &#123;</span><br><span class="line">      commit(&apos;SET_LANGUAGE&apos;, language)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default app</span><br></pre></td></tr></table></figure>
<p>åœ¨é¡¹ç›®éœ€è¦åˆ‡æ¢è¯­è¨€çš„ä½ç½®ï¼Œæ·»åŠ å¦‚ä¸‹äº‹ä»¶å³å¯ï¼Œï¼ˆäº‹ä»¶ï¼šå°†è¯­è¨€ä»£ç å­˜å…¥åˆ°vuexä¸­ï¼Œvuexä¸­è°ƒç”¨setcookieå³å¯å­˜å…¥åˆ°cookieä¸­,å¹¶æ”¹å˜i18nä¸­çš„localå³å¯åˆ‡æ¢è¯­è¨€ã€‚ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">handleSetLanguage(lang) &#123;</span><br><span class="line">  this.$i18n.locale = lang</span><br><span class="line">  this.$store.dispatch(&apos;setLanguage&apos;, lang)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šå³å¯å®ç°å›½é™…åŒ–ï¼ï¼ï¼ï¼ï¼<br>ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/vueI18/" data-id="ckd4b4q2r0027t2p34ni8dn92" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-fixProject" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/fixProject/" class="article-date">
  <time datetime="2020-07-27T09:22:37.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/fixProject/">å¦‚ä½•ä¼˜åŒ–é¡¹ç›®</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ä¸€äº›æœ‰æ„æ€çš„loader-å’Œ-plugins"><a href="#ä¸€äº›æœ‰æ„æ€çš„loader-å’Œ-plugins" class="headerlink" title="ä¸€äº›æœ‰æ„æ€çš„loader å’Œ plugins"></a>ä¸€äº›æœ‰æ„æ€çš„loader å’Œ plugins</h2><hr>
<h4 id="å¦‚ä½•è‡ªåŠ¨åŠ è½½"><a href="#å¦‚ä½•è‡ªåŠ¨åŠ è½½" class="headerlink" title="å¦‚ä½•è‡ªåŠ¨åŠ è½½"></a>å¦‚ä½•è‡ªåŠ¨åŠ è½½</h4><p><code>require.context</code>ï¼šæ ¹æ®è‡ªå®šçš„è§„åˆ™è·å–éœ€è¦çš„å†…å®¹ã€‚</p>
<blockquote>
<p>è§£å†³å›°æ‰°ï¼šæ–°å¢æˆ–å‡å°‘é¡µé¢æ¯æ¬¡éœ€è¦æ›´æ”¹è·¯ç”±é…ç½®ï¼Ÿ</p>
</blockquote>
<ul>
<li>ä»¥vueé¡¹ç›®ä¸ºä¾‹ï¼Œå®ç°åŠ¨æ€é…ç½®è·¯ç”±ã€‚</li>
</ul>
<p>åœ¨vueçš„componentä¸­æŒ‰ç…§å¦‚ä¸‹æ ¼å¼é…ç½®é¡µé¢ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/11846892-47016d33b4647d29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<blockquote>
<p>mode (æ¨¡å—åç§°)</p>
<blockquote>
<p>index.routes.js (è¯¥æ¨¡å—ä¸‹è·¯ç”±è§£æé…ç½®)<br>pages (æ–‡ä»¶ç»Ÿä¸€åç§°)</p>
<blockquote>
<p>mode.index.vue (æ¨¡å—ä¸‹é»˜è®¤é¡µé¢)<br>mode.resource.vue  (æ¨¡å—ä¸‹å…¶ä»–é¡µé¢)</p>
</blockquote>
</blockquote>
</blockquote>
<p>åœ¨modeä¸­çš„index.routes.jsä¸­é…ç½®è·¯ç”±è§£æä»£ç ,ä¼šè‡ªåŠ¨ç”Ÿæˆroutes<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// ç¬¬1ä¸ªå‚æ•°ï¼š è·¯å¾„</span><br><span class="line">// ç¬¬2ä¸ªå‚æ•°: æ˜¯å¦éå†1å‚æ•°ä¸‹é¢çš„å­æ–‡ä»¶å¤¹</span><br><span class="line">// ç¬¬3ä¸ªå‚æ•°ï¼š æ­£åˆ™åŒ¹é…å¯¹åº”åç¼€çš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">let r = require.context(&apos;./pages&apos;, false, /.vue/);</span><br><span class="line">// ræ˜¯ä¸€ä¸ªfunc,ç›´æ¥è°ƒç”¨ä¼šæŠ¥é”™ã€‚</span><br><span class="line">let routesArr = [];</span><br><span class="line">r.keys().forEach((key) =&gt; &#123;</span><br><span class="line">  console.log(r(key))</span><br><span class="line">  let _keyArr = key.split(&apos;.&apos;);</span><br><span class="line">  if (key.indexOf(&apos;index&apos;) != -1) &#123;</span><br><span class="line">    routesArr.push (&#123;</span><br><span class="line">      path: _keyArr[1],</span><br><span class="line">      name: _keyArr[1],</span><br><span class="line">      component: r(key).default</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    routesArr.push (&#123;</span><br><span class="line">      path: `$&#123;_keyArr[1]&#125;/$&#123;_keyArr[2]&#125;`,</span><br><span class="line">      name: _keyArr[1],</span><br><span class="line">      component: r(key).default</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">export default routesArr</span><br></pre></td></tr></table></figure></p>
<p>åœ¨æ€»è·¯ç”±åœ°å€ä¸‹å¼•ç”¨å„ä¸ªæ¨¡å—ä¸‹é¢çš„è·¯ç”±ï¼š</p>
<p>åœ¨router &gt; index.jsé…ç½®å¦‚ä¸‹ä»£ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let r = require.context(&apos;./components&apos;, true, /\.routes\.js/);</span><br><span class="line">let routesArr: any[] = [];</span><br><span class="line">r.keys().forEach((key) =&gt; &#123;</span><br><span class="line">  console.log(r(key));</span><br><span class="line">  routesArr = routesArr.concat(r(key).defalut);</span><br><span class="line">&#125;)</span><br><span class="line">export const routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &quot;/&quot;,</span><br><span class="line">    name: &apos;Home&apos;,</span><br><span class="line">    components:Home</span><br><span class="line">  &#125;,</span><br><span class="line">  ...routesArr</span><br><span class="line">];</span><br></pre></td></tr></table></figure></p>
<p>ç¼ºç‚¹ï¼š<br>  1.ä¸èƒ½æŒ‰éœ€å¼•å…¥<br>  2.ä¸èƒ½å®ç°åŠ¨æ€è·¯ç”±ã€‚<br>ä¼˜ç‚¹ï¼š<br>  1.è§„èŒƒé¡¹ç›®ç»“æ„+æ–‡ä»¶å‘½å+è·¯ç”±å‘½å<br>  2.å‡å°‘é…ç½®è·¯ç”±çš„å›°æ‰°</p>
<h2 id="å¦‚ä½•ä¼˜åŒ–æ‰“åŒ…"><a href="#å¦‚ä½•ä¼˜åŒ–æ‰“åŒ…" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–æ‰“åŒ…"></a>å¦‚ä½•ä¼˜åŒ–æ‰“åŒ…</h2><hr>
<h4 id="Dllä¼˜åŒ–"><a href="#Dllä¼˜åŒ–" class="headerlink" title="Dllä¼˜åŒ–"></a>Dllä¼˜åŒ–</h4><p>åŸç†ï¼š å‡å°‘å¤„ç†å†…å®¹å’Œæ­¥éª¤<br>js - ç¬¬ä¸‰æ–¹åº“ï¼š vue / vue-router / axios /loadsh (åªå‹ç¼©æ‰“åŒ…ä¸€æ¬¡,ç¼“å­˜åˆ°é™æ€æ–‡ä»¶ä¸­)</p>
<p>æ­¥éª¤ï¼š é¢„å¤„ç†ç¬¬ä¸‰æ–¹åº“ -&gt; æ‰“åŒ…å…¶ä»–æ–‡ä»¶ã€‚</p>
<ul>
<li>ä»¥vueé¡¹ç›®ä¸ºä¾‹ï¼Œå°è£…Dllä¼˜åŒ–ã€‚</li>
</ul>
<p>åœ¨vueé¡¹ç›®çš„bulidæ–‡ä»¶ä¸‹æ–°å»ºwebpack.dll.jsæ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">var path = require(&apos;path&apos;)</span><br><span class="line">var webpack = require(&apos;webpack&apos;)</span><br><span class="line">var config = require(&apos;../config&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    // å®šä¹‰æå‰å¤„ç†çš„æ–‡ä»¶</span><br><span class="line">    vendor: [&apos;vue/dist/vue.esm.js&apos;, &apos;vue-router&apos;]</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    // å°†é¢„å¤„ç†æ‰“åŒ…å¥½çš„æ–‡ä»¶èµ„æºï¼Œæ”¾åœ¨é™æ€æ–‡ä»¶å¤¹ä¸­ã€‚</span><br><span class="line">    path: path.join(__dirname, &apos;../static/js&apos;),</span><br><span class="line">    filename: &apos;[name].dll.js&apos;,</span><br><span class="line">    library: &apos;[name]_library&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    // åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªé€šçŸ¥ï¼Œå‘½åä¸º[name]_manifest.json</span><br><span class="line">    new webpack.DllPlugin(&#123;</span><br><span class="line">      path:path.join(__dirname,&apos;.&apos;, &apos;[name]-manifest.json&apos;),</span><br><span class="line">      name: &apos;[name]_library&apos; // å¯¹åº”outputä¸­çš„library</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨package.json çš„ <code>scripts</code>ä¸­é…ç½®npm run dll å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;dll&quot;: &quot;webpack --config build/webpack.dll.js&quot;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åæ‰§è¡Œ<code>npm run dll</code>å‘½ä»¤çœ‹ä¸€ä¸‹æ‰“åŒ…æ‰€éœ€è¦çš„æ—¶é—´<br><img src="https://upload-images.jianshu.io/upload_images/11846892-fafb831343c335b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ç„¶ååœ¨æ‰§è¡Œä¸€ä¸‹<code>npm run build</code> å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹åŸå§‹æ‰“åŒ…æ‰€éœ€è¦çš„æ—¶é—´<br><img src="https://upload-images.jianshu.io/upload_images/11846892-d5d9ff566fdbde19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>æ‰§è¡Œ<code>npm run dll</code>å‘½ä»¤ä¹‹åä¼šå‘ç°åœ¨<code>bulid</code>æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†<br><code>vendor-manifest.json</code>,åœ¨<code>static/js</code>ä¸‹ç”Ÿæˆäº†<code>vendor.dll.js</code>ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/11846892-4cf356217f7b1eb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><img src="https://upload-images.jianshu.io/upload_images/11846892-4e1610e26c92530e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ç„¶ååœ¨<code>bulid/webpack.prod.conf.js</code>ä¸­é…ç½®æ­£å¸¸æ‰“åŒ…ä¸‹çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    new webpack.DllReferencePlugin(&#123;</span><br><span class="line">      //context: åœ¨htmlä¸­å¼•å…¥çš„è·¯å¾„ã€‚</span><br><span class="line">      context: path.join(__dirname, &apos;..&apos;),</span><br><span class="line">      manifest: require(&apos;./vendor-manifest.json&apos;)</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>æœ€ååœ¨æ‰§è¡Œä¸€ä¸‹<code>npm run build</code> å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹dllå¤„ç†ä¹‹åæ‰“åŒ…æ‰€éœ€è¦çš„æ—¶é—´<br><img src="https://upload-images.jianshu.io/upload_images/11846892-cd9552fdd529d347.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>å¾ˆå®Œç¾çš„èŠ‚çº¦äº†ä¸€äº›æ—¶é—´ï¼Œæ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œæ—¶é—´å°±æ˜¯ç”Ÿå‘½ã€‚</p>
<h4 id="å¦‚ä½•å¼€å‘æ’ä»¶ä¸loader"><a href="#å¦‚ä½•å¼€å‘æ’ä»¶ä¸loader" class="headerlink" title="å¦‚ä½•å¼€å‘æ’ä»¶ä¸loader"></a>å¦‚ä½•å¼€å‘æ’ä»¶ä¸loader</h4><hr>
<blockquote>
<p>ç¤ºä¾‹é—®é¢˜ï¼šé¡¹ç›®vuexè¿‡å¤§ï¼Œå¯¼è‡´æ‰“åŒ…ç»“æœè¿‡å¤§ã€‚<br>å¤„ç†ï¼š æŒ‰ç»„ä»¶å¼‚æ­¥åŠ è½½vuex</p>
</blockquote>
<p>åœ¨src/storeæ–‡ä»¶å¤¹ä¸‹indexæ–‡ä»¶ä¸­å­˜å‚¨é¦–å±åŠ è½½çš„vuexæ•°æ®;<br>åœ¨src/store/model/.. æ–‡ä»¶å¤¹ä¸‹å­˜å‚¨å…¶ä»–æ¨¡å—éœ€è¦æ‡’åŠ è½½çš„vuexæ•°æ®;<br><img src="https://upload-images.jianshu.io/upload_images/11846892-5b5262f39bc46f2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>åœ¨srcä¸‹æ–°å»ºvuePlugins/indexå°è£…æ’ä»¶<br><img src="https://upload-images.jianshu.io/upload_images/11846892-8799f362b4bdfdff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">let a = &#123;</span><br><span class="line">  install:function(vue) &#123;</span><br><span class="line">    vue.mixin(&#123;</span><br><span class="line">      beforeCreate:function()&#123;</span><br><span class="line">        if (this.$options.isVuex) &#123;</span><br><span class="line">          // åœ¨å¯¹åº”é¡µé¢ä¸­é…ç½®store</span><br><span class="line">          // storeä¸­å­˜å‚¨éœ€è¦æŒ‰éœ€åŠ è½½çš„vuexç›¸å…³çš„jsæ–‡ä»¶</span><br><span class="line">          let store = this.$options.store;</span><br><span class="line">          // åŠ¨æ€å¼•å…¥vuex</span><br><span class="line">          // æ³¨æ„ï¼šimportçš„å‚æ•°ä¸èƒ½ä¼ å…¥å˜é‡ã€‚</span><br><span class="line">          import(&apos;../store/model/&apos;+ store).then((res) =&gt; &#123;</span><br><span class="line">            // registerModulæ–¹æ³•æ˜¯vuexçš„æ–¹æ³•;</span><br><span class="line">            this.$store.registerModule(store, res.default);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default a;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨main.jså¼•å…¥æ’ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Vuepl from &quot;./vuePlugins&quot;;</span><br><span class="line">Vue.use(Vuepl);</span><br></pre></td></tr></table></figure></p>
<p>åœ¨éœ€è¦æ‡’åŠ è½½vuexçš„é¡µé¢é…ç½®<br><img src="https://upload-images.jianshu.io/upload_images/11846892-c4e24d770a72ec58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isVuex:true;</span><br><span class="line">store: &apos;modelIndex&apos;;</span><br></pre></td></tr></table></figure></p>
<p>ğŸ‘Œäº†ï¼ä»¥ä¸Šå°±æ˜¯vuexå®ç°æŒ‰éœ€åŠ è½½çš„æ —å­ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/fixProject/" data-id="ckd4b4q1f0012t2p39wm47pmr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-axios1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/axios1/" class="article-date">
  <time datetime="2020-07-27T09:21:00.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/axios1/">Axiosæºç è§£æ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="axioså¦‚ä½•å®ç°å¤šç§è¯·æ±‚æ–¹å¼"><a href="#axioså¦‚ä½•å®ç°å¤šç§è¯·æ±‚æ–¹å¼" class="headerlink" title="axioså¦‚ä½•å®ç°å¤šç§è¯·æ±‚æ–¹å¼"></a>axioså¦‚ä½•å®ç°å¤šç§è¯·æ±‚æ–¹å¼</h4><hr>
<p><code>åŸç†</code>ï¼š é€šè¿‡æ•°ç»„å¾ªç¯æ¥æ‰¹é‡æ³¨å†Œæ¥å£ï¼Œç»Ÿä¸€è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•ï¼Œå‚æ•°å·®å¼‚ï¼šé€šè¿‡until.merge()æ–¹æ³•æ¥è§£å†³å·®å¼‚ã€‚ç±»å‹ï¼šé€šè¿‡æ–¹æ³•å¾ªç¯çš„methodæ¥åŒºåˆ†ã€‚<br><code>å®ç°é€»è¾‘</code>ï¼š</p>
<ol>
<li>ç”Ÿæˆaxioså®ä¾‹ï¼›</li>
<li>é€šè¿‡bindæ–¹æ³•å°†axiosåŸå‹ä¸­çš„requestæ–¹æ³•æŒ‡å‘axioså®ä¾‹ï¼›</li>
<li>é€šè¿‡extendæ–¹æ³•å°†axioså®ä¾‹å’Œaxiosçš„åŸå‹é“¾åˆå¹¶å¹¶æŒ‡å‘context<br>ç›®çš„ï¼š æ‰©å±•axiosçš„è°ƒç”¨æ–¹æ³•ã€‚ä½¿axioså¯ä»¥é€šè¿‡axios.getå»è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸå‹é“¾å»è°ƒç”¨ã€‚</li>
<li>åˆ©ç”¨é€šè¿‡æ•°ç»„å¾ªç¯æ¥æ‰¹é‡æ³¨å†Œæ¥å£ï¼Œç»Ÿä¸€è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•.<br>é€šè¿‡until.merge()æ–¹æ³•æ¥è§£å†³å‚æ•°å·®å¼‚ã€‚</li>
</ol>
<p><code>ä»£ç ç¤ºä¾‹</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">function Axios (instanceConfig) &#123;</span><br><span class="line">  this.default = instanceConfig;</span><br><span class="line">&#125;</span><br><span class="line">/** </span><br><span class="line"> * bind(&#123;&#125;, &#123;&#125;)</span><br><span class="line"> * bind:å°†ç¬¬ä¸€ä¸ªå‚æ•°çš„æŒ‡å‘ç¬¬äºŒä¸ªå‚æ•°;</span><br><span class="line"> * extend(&#123;&#125;, &#123;&#125;)</span><br><span class="line"> * extend:å°†ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œåˆå¹¶;</span><br><span class="line">*/</span><br><span class="line">function creatInstance (defaultConfig) &#123;</span><br><span class="line">  let context = new Axios(defaultConfig);</span><br><span class="line">  // å°†Axiosä¸­çš„requestæ–¹æ³•ï¼ŒæŒ‡å‘æ–°çš„Axioså¯¹è±¡</span><br><span class="line">  let instance = bind(Axios.prototype.request, context);</span><br><span class="line">  // å°†å‰ä¸¤ä¸ªå¯¹è±¡åˆå¹¶ï¼Œåˆå¹¶åçš„thisæŒ‡å‘context</span><br><span class="line">  // ç›®çš„ï¼šæ‰©å±•axiosçš„è°ƒç”¨æ–¹æ³•ã€‚ä½¿axioså¯ä»¥é€šè¿‡axios.getå»è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸå‹é“¾å»è°ƒç”¨ã€‚</span><br><span class="line">  extend(instance, Axios.prototype, context);</span><br><span class="line">  return instance;</span><br><span class="line">&#125;</span><br><span class="line">// axios.get()</span><br><span class="line"></span><br><span class="line">let arr = [&apos;get&apos;, &apos;post&apos;, &apos;push &apos; ,&apos;delete&apos;];</span><br><span class="line"></span><br><span class="line">arr.forEach((method) =&gt; &#123;</span><br><span class="line">  // å¾ªç¯åœ¨åŸå‹é“¾ä¸Šæ³¨å†Œè¯·æ±‚æ–¹æ³•ã€‚</span><br><span class="line">  Axios.prototype[method] = function(url,config)&#123;</span><br><span class="line">    // config :postçš„data,</span><br><span class="line">    // util.merge :axiosä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼ŒåŸç†å¯¹è±¡åˆå¹¶</span><br><span class="line">    return this.request(util.merge(config || &#123;&#125;, &#123;</span><br><span class="line">        methods: method,</span><br><span class="line">        url: url</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="axioså¦‚ä½•å®ç°è¯·æ±‚æ‹¦æˆª"><a href="#axioså¦‚ä½•å®ç°è¯·æ±‚æ‹¦æˆª" class="headerlink" title="axioså¦‚ä½•å®ç°è¯·æ±‚æ‹¦æˆª"></a>axioså¦‚ä½•å®ç°è¯·æ±‚æ‹¦æˆª</h4><hr>
<p><code>å®ç°é€»è¾‘</code>ï¼š</p>
<ol>
<li>åœ¨axiosä¸­é…ç½®æ‹¦æˆªå™¨ <code>interceptors</code>ï¼Œæ‹¦æˆªå™¨åŒ…å«requestå±æ€§ï¼Œå’Œresponseå±æ€§ï¼Œä¸¤ä¸ªå±æ€§å¯¹åº”æ‹¦æˆªå™¨ç®¡ç†æ–¹æ³•interceptorsMannerã€‚</li>
<li>interceptorsManneræ–¹æ³•ä¸­é…ç½®handlerå±æ€§ï¼Œhandlerå±æ€§ç”¨äºå­˜æ”¾useåŠ å…¥çš„æ–¹æ³•ã€‚</li>
<li>åœ¨interceptorsMannerçš„åŸå‹ä¸Šé…ç½®useæ–¹æ³•ï¼Œuseræ–¹æ³•å°†å‚æ•°fulilled, rejectedä¸¤ä¸ªæ–¹æ³•å­˜å…¥å¯¹è±¡ä¸­å¹¶å­˜å…¥åˆ°handlerä¸­ã€‚</li>
<li>åœ¨axiosçš„åŸå‹çš„requestæ–¹æ³•ä¸­æ³¨å†Œæ•°ç»„chain  =  [â€˜dispatchRequestâ€™, undefined];<br>å…¶ä¸­ï¼šrequest ä¼šé€šè¿‡dispatchRequestå°†è¯·æ±‚å‘é€å‡ºå»ï¼›<br>4.1 å¾ªç¯interceptors.request.handlerå°†ç”¨æˆ·å­˜å…¥çš„è¯·æ±‚æ‹¦æˆªçš„ä¸¤ä¸ªå‚æ•°æ–¹æ³•é€šè¿‡unshiftåˆ†åˆ«å­˜æ”¾åˆ°æ•°ç»„ä¸­ã€‚<br>4.2 å¾ªç¯interceptors.response.handlerå°†ç”¨æˆ·å­˜å…¥çš„å“åº”æ‹¦æˆªçš„ä¸¤ä¸ªå‚æ•°æ–¹æ³•é€šè¿‡shiftåˆ†åˆ«å­˜æ”¾åˆ°æ•°ç»„ä¸­ã€‚<br>4.3 æ³¨å†Œpromise = Promise.resolve()ï¼›<br>4.4 å¾ªç¯chainï¼Œé€šè¿‡promiseæ‰§è¡Œchainæ•°ç»„ä¸­çš„æ–¹æ³•ã€‚<br><code>ç¤ºä¾‹ä»£ç </code>ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">function Axios (instanceConfig) &#123;</span><br><span class="line">  this.default = instanceConfig;</span><br><span class="line">  this.interceptors=&#123;</span><br><span class="line">    request: new interceptorsManner(),</span><br><span class="line">    response: new interceptorsManner(),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Axios.prototype.request = function()&#123;</span><br><span class="line">  // request ä¼šé€šè¿‡dispatchRequestå°†è¯·æ±‚å‘é€å‡ºå»</span><br><span class="line">  let chain = [&apos;dispatchRequest&apos;, undefined];</span><br><span class="line">  let promise = Promise.resolve();</span><br><span class="line">  this.interceptors.request.handler.forEach((interceptor) =&gt; &#123;</span><br><span class="line">    chain.unshift(interceptor.fulilled, interceptor.rejected)</span><br><span class="line">  &#125;)</span><br><span class="line">  this.interceptors.response.handler.forEach((interceptor) =&gt; &#123;</span><br><span class="line">    chain.unshift(interceptor.fulilled, interceptor.rejected)</span><br><span class="line">  // chain = [console.log(1), console.log(2),dispatchRequest,undefined, console.log(3), console.log(4)]</span><br><span class="line">  &#125;)</span><br><span class="line">  while(chain.length) &#123;</span><br><span class="line">    promise = promise.then(chain.shift(), chain.shift())</span><br><span class="line">    // ä¸¾ä¾‹</span><br><span class="line">    // ç¬¬ä¸€æ¬¡å¾ªç¯æ‰§è¡Œè¯·æ±‚æ‹¦æˆªå‰çš„æˆåŠŸå’Œå¤±è´¥æ–¹æ³•</span><br><span class="line">    // ç¬¬äºŒæ¬¡å¾ªç¯æ‰§è¡Œå‘é€è¯·æ±‚å’Œundefined;</span><br><span class="line">    // ç¬¬ä¸€æ¬¡å¾ªç¯æ‰§è¡Œå“åº”æ‹¦æˆªå‰çš„æˆåŠŸå’Œå¤±è´¥æ–¹æ³•</span><br><span class="line">  &#125;</span><br><span class="line">  // ä¾æ¬¡æ‰§è¡Œï¼Œå¹¶ä¿è¯ä¸Šä¸€ä¸ªæ–¹æ³•å®Œæˆä¹‹ååœ¨ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªæ–¹æ³•ã€‚</span><br><span class="line">&#125;;</span><br><span class="line">function interceptorsManner () &#123;</span><br><span class="line">  this.handler= []; //å­˜æ”¾useåŠ å…¥çš„æ–¹æ³•</span><br><span class="line">&#125;</span><br><span class="line">interceptorsManner.prototype.use = function use(fulilled, rejected) &#123;</span><br><span class="line">  this.handler.push(&#123;</span><br><span class="line">    fulilled:  fulilled,</span><br><span class="line">    rejected: rejected</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">//è¯·æ±‚æ‹¦æˆªå™¨&amp;å“åº”æ‹¦æˆªå™¨çš„ä½¿ç”¨æ–¹æ³•</span><br><span class="line">Axios.interceptors.request.use(function()&#123;</span><br><span class="line"></span><br><span class="line">&#125;,function()&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">Axios.interceptors.response.use(function()&#123;</span><br><span class="line"></span><br><span class="line">&#125;,function()&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>å®Œç¾ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼<br>æ¥ä¸‹æ¥ä½ å¯èƒ½æƒ³è¦äº†è§£çš„ï¼š<br><a href="https://www.npmjs.com/package/axios" target="_blank" rel="noopener">axiosæ–‡æ¡£åœ°å€</a><br><a href="https://www.jianshu.com/p/7f7b655bd3c4" target="_blank" rel="noopener">Axioså°è£…ç¤ºä¾‹ä»£ç +å°è£…æ€è·¯</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/axios1/" data-id="ckd4b4q1i0015t2p3x2zf8jhq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-reactCom2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/reactCom2/" class="article-date">
  <time datetime="2020-07-27T09:17:30.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/reactCom2/">ä½¿ç”¨reactæ­å»ºç»„ä»¶åº“--radioç»„ä»¶</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>####å‰è¨€<br>ä½ åº”è¯¥éœ€è¦ï¼š<a href="[https://www.jianshu.com/p/8ef96e06adcc](https://www.jianshu.com/p/8ef96e06adcc">ä½¿ç”¨reactæ­å»ºç»„ä»¶åº“ï¼šreact+typescript+storybook</a><br>)</p>
<p>##1. å®‰è£…ä¾èµ–<br>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <code>rc-checkbox</code>ï¼š <a href="https://www.npmjs.com/package/rc-checkbox" target="_blank" rel="noopener">react rc-checkbox component</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install rc-checkbox</span><br></pre></td></tr></table></figure>
<p>##2. ç¼–å†™ç»„ä»¶</p>
<ul>
<li><p>æ–°å»º <code>src/components/Radio/radio.tsx</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">import RcCheckbox from &apos;rc-checkbox&apos;;</span><br><span class="line">import classNames from &apos;classnames&apos;;</span><br><span class="line">import &#123; RadioProps, RadioChangeEvent &#125; from &apos;./interface&apos;;</span><br><span class="line">import &#123; ConfigContext &#125; from &apos;../config-provider&apos;;</span><br><span class="line">import RadioGroupContext from &apos;./context&apos;;</span><br><span class="line">import &#123; composeRef &#125; from &apos;../_util/ref&apos;;</span><br><span class="line">const InternalRadio: React.ForwardRefRenderFunction&lt;unknown, RadioProps&gt; = (props, ref) =&gt; &#123;</span><br><span class="line">  const context = React.useContext(RadioGroupContext);</span><br><span class="line">  const &#123; getPrefixCls, direction &#125; = React.useContext(ConfigContext);</span><br><span class="line">  const innerRef = React.useRef&lt;HTMLElement&gt;();</span><br><span class="line">  const mergedRef = composeRef(ref, innerRef);</span><br><span class="line">  </span><br><span class="line">  const onChange = (e: RadioChangeEvent) =&gt; &#123;</span><br><span class="line">    if (props.onChange) &#123;</span><br><span class="line">      props.onChange(e);</span><br><span class="line">    &#125;</span><br><span class="line">    if (context?.onChange) &#123;</span><br><span class="line">      context.onChange(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const &#123; prefixCls: customizePrefixCls, className, children, style, ...restProps &#125; = props;</span><br><span class="line">  const prefixCls = getPrefixCls(&apos;radio&apos;, customizePrefixCls);</span><br><span class="line">  console.log(prefixCls, customizePrefixCls)</span><br><span class="line">  const radioProps: RadioProps = &#123; ...restProps &#125;;</span><br><span class="line">  if (context) &#123;</span><br><span class="line">    radioProps.name = context.name;</span><br><span class="line">    radioProps.onChange = onChange;</span><br><span class="line">    radioProps.checked = props.value === context.value;</span><br><span class="line">    radioProps.disabled = props.disabled || context.disabled;</span><br><span class="line">  &#125;</span><br><span class="line">  const wrapperClassString = classNames(className, &#123;</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper`]: true,</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper-checked`]: radioProps.checked,</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper-disabled`]: radioProps.disabled,</span><br><span class="line">    [`$&#123;prefixCls&#125;-wrapper-rtl`]: direction === &apos;rtl&apos;,</span><br><span class="line">  &#125;);</span><br><span class="line">  return (</span><br><span class="line">    &lt;label</span><br><span class="line">      className=&#123;wrapperClassString&#125;</span><br><span class="line">      style=&#123;style&#125;</span><br><span class="line">      onMouseEnter=&#123;props.onMouseEnter&#125;</span><br><span class="line">      onMouseLeave=&#123;props.onMouseLeave&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;RcCheckbox &#123;...radioProps&#125; prefixCls=&#123;prefixCls as string&#125; ref=&#123;mergedRef as any&#125; /&gt;</span><br><span class="line">      &#123;children !== undefined ? &lt;span&gt;&#123;children&#125;&lt;/span&gt; : null&#125;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">const Radio = React.forwardRef&lt;unknown, RadioProps&gt;(InternalRadio);</span><br><span class="line">Radio.displayName = &apos;Radio&apos;;</span><br><span class="line"></span><br><span class="line">Radio.defaultProps = &#123;</span><br><span class="line">  type: &apos;radio&apos;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Radio;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/Radio/interface.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">export interface AbstractCheckboxProps&lt;T&gt; &#123;</span><br><span class="line">  prefixCls?: string;</span><br><span class="line">  className?: string;</span><br><span class="line">  defaultChecked?: boolean;</span><br><span class="line">  checked?: boolean;</span><br><span class="line">  style?: React.CSSProperties;</span><br><span class="line">  disabled?: boolean;</span><br><span class="line">  onChange?: (e: T) =&gt; void;</span><br><span class="line">  onClick?: React.MouseEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onMouseEnter?: React.MouseEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onMouseLeave?: React.MouseEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onKeyPress?: React.KeyboardEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  onKeyDown?: React.KeyboardEventHandler&lt;HTMLElement&gt;;</span><br><span class="line">  value?: any;</span><br><span class="line">  tabIndex?: number;</span><br><span class="line">  name?: string;</span><br><span class="line">  children?: React.ReactNode;</span><br><span class="line">  id?: string;</span><br><span class="line">  autoFocus?: boolean;</span><br><span class="line">  type?: string;</span><br><span class="line">&#125;</span><br><span class="line">export type RadioProps = AbstractCheckboxProps&lt;RadioChangeEvent&gt;;</span><br><span class="line">export interface RadioChangeEventTarget extends RadioProps &#123;</span><br><span class="line">  checked: boolean;</span><br><span class="line">&#125;</span><br><span class="line">export interface RadioChangeEvent &#123;</span><br><span class="line">  target: RadioChangeEventTarget;</span><br><span class="line">  stopPropagation: () =&gt; void;</span><br><span class="line">  preventDefault: () =&gt; void;</span><br><span class="line">  nativeEvent: MouseEvent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export interface RadioGroupContextProps &#123;</span><br><span class="line">  onChange: (e: RadioChangeEvent) =&gt; void;</span><br><span class="line">  value: any;</span><br><span class="line">  disabled?: boolean;</span><br><span class="line">  name?: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/config-provider/context.tsx: ä¸ºç»„ä»¶åº“æä¾›å…±äº«çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">export interface ConfigConsumerProps &#123;</span><br><span class="line">  getPrefixCls: (suffixCls: string, customizePrefixCls?: string) =&gt; string;</span><br><span class="line">  direction?: &apos;ltr&apos; | &apos;rtl&apos;;</span><br><span class="line">&#125;</span><br><span class="line">export const ConfigContext = React.createContext&lt;ConfigConsumerProps&gt;(&#123;</span><br><span class="line">  // We provide a default function for Context without provider</span><br><span class="line">  getPrefixCls: (suffixCls: string, customizePrefixCls?: string) =&gt; &#123;</span><br><span class="line">    if (customizePrefixCls) return customizePrefixCls;</span><br><span class="line"></span><br><span class="line">    return suffixCls ? `echo-$&#123;suffixCls&#125;` : &apos;echo&apos;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export const ConfigConsumer = ConfigContext.Consumer;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/config-provider/index.tsx: ä¸ºç»„ä»¶åº“æä¾›å…±äº«çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ConfigContext, ConfigConsumer &#125; from &apos;./context&apos;;</span><br><span class="line">export &#123; ConfigContext, ConfigConsumer&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/config-provider/SizeContext.tsx: ä¸ºç»„ä»¶åº“æä¾›å¤§å°å…±äº«çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">export type SizeType = &apos;small&apos; | &apos;middle&apos; | &apos;large&apos; | undefined;</span><br><span class="line">const SizeContext = React.createContext&lt;SizeType&gt;(undefined);</span><br><span class="line">export default SizeContext;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/Radio/context.tsx: ä¸ºRadioç›¸å…³ç»„ä»¶æä¾›å…±äº«çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line">import &#123; RadioGroupContextProps &#125; from &apos;./interface&apos;;</span><br><span class="line">const RadioGroupContext = React.createContext&lt;RadioGroupContextProps | null&gt;(null);</span><br><span class="line">export const RadioGroupContextProvider = RadioGroupContext.Provider;</span><br><span class="line">export default RadioGroupContext;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/_util/ref.tsx:ç»„ä»¶åº“é€šç”¨æ–¹æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &apos;react&apos;;</span><br><span class="line"></span><br><span class="line">export function fillRef&lt;T&gt;(ref: React.Ref&lt;T&gt;, node: T) &#123;</span><br><span class="line">  if (typeof ref === &apos;function&apos;) &#123;</span><br><span class="line">    ref(node);</span><br><span class="line">  &#125; else if (typeof ref === &apos;object&apos; &amp;&amp; ref &amp;&amp; &apos;current&apos; in ref) &#123;</span><br><span class="line">    (ref as any).current = node;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function composeRef&lt;T&gt;(...refs: React.Ref&lt;T&gt;[]): React.Ref&lt;T&gt; &#123;</span><br><span class="line">  return (node: T) =&gt; &#123;</span><br><span class="line">    refs.forEach(ref =&gt; &#123;</span><br><span class="line">      fillRef(ref, node);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/Radio/index.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Radio from &quot;./radio&quot;;</span><br><span class="line">export default Radio;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/Radio/_rtl.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;../../styles/variables/radio&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$radio-prefix-cls: &apos;echo-radio&apos;;</span><br><span class="line">$radio-group-prefix-cls: &apos;#&#123;$radio-prefix-cls&#125;-group&apos;;</span><br><span class="line">$radio-prefix-cls-button-wrapper: &apos;#&#123;$radio-prefix-cls&#125;-button-wrapper&apos;;</span><br><span class="line">.#&#123;$radio-group-prefix-cls&#125;&#123;</span><br><span class="line">  &amp;-rtl &#123;</span><br><span class="line">    direction: rtl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¸€èˆ¬çŠ¶æ€</span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-wrapper &#123;</span><br><span class="line">  &amp;-rtl &#123;</span><br><span class="line">    margin-right: 0;</span><br><span class="line">    margin-left: $radio-wrapper-margin-right;</span><br><span class="line">    direction: rtl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls-button-wrapper&#125; &#123;</span><br><span class="line">  &amp;-rtl &#123;</span><br><span class="line">    border-right-width: 0;</span><br><span class="line">    border-left-width: $border-width-base;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:not(:first-child) &#123;</span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">        right: -1px;</span><br><span class="line">        left: 0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:first-child &#123;</span><br><span class="line">    .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">      border-right: $border-width-base $border-style-base $border-color-base;</span><br><span class="line">      border-radius: 0 $border-radius-base $border-radius-base 0;</span><br><span class="line">    &#125;</span><br><span class="line">    .#&#123;$radio-prefix-cls-button-wrapper&#125;-checked:not([class*=&quot;&apos;#&#123;$radio-prefix-cls&#125;-button-wrapper-disabled&apos;&quot;]) &amp; &#123;</span><br><span class="line">      border-right-color:lighten($primary, 10%);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:last-child &#123;</span><br><span class="line">    .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">      border-radius: $border-radius-base 0 0 $border-radius-base;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-disabled &#123;</span><br><span class="line">    &amp;:first-child &#123;</span><br><span class="line">      .#&#123;$radio-prefix-cls-button-wrapper&#125;.#&#123;$radio-prefix-cls-button-wrapper&#125;-rtl &amp; &#123;</span><br><span class="line">        border-right-color: $border-color-base;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/Icon/_style.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;../../styles/variables/radio&quot;;</span><br><span class="line">@import &quot;./rtl&quot;;</span><br><span class="line"></span><br><span class="line">$radio-prefix-cls: &apos;echo-radio&apos;;</span><br><span class="line">$radio-group-prefix-cls: &apos;#&#123;$radio-prefix-cls&#125;-group&apos;;</span><br><span class="line">$radio-inner-prefix-cls: &apos;#&#123;radio-prefix-cls&#125;-inner&apos;;</span><br><span class="line">$radio-duration: 0.3s;</span><br><span class="line">$radio-focus-shadow: 0 0 0 3px fade($primary, 8%);</span><br><span class="line">$radio-button-focus-shadow: $radio-focus-shadow;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-group-prefix-cls&#125; &#123;</span><br><span class="line">  @include reset-component;</span><br><span class="line"></span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 0;</span><br><span class="line">  line-height: unset;</span><br><span class="line"></span><br><span class="line">  .echo-badge-count &#123;</span><br><span class="line">    z-index: 1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .echo-badge:not(:first-child) .#&#123;$radio-prefix-cls&#125;-button-wrapper &#123;</span><br><span class="line">    border-left: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¸€èˆ¬çŠ¶æ€</span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-wrapper &#123;</span><br><span class="line">  @include reset-component;</span><br><span class="line"></span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin-right: $radio-wrapper-margin-right;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls&#125; &#123;</span><br><span class="line">  @include reset-component;</span><br><span class="line"></span><br><span class="line">  position: relative;</span><br><span class="line">  top: -3px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  line-height: 1;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  vertical-align: sub;</span><br><span class="line">  outline: none;</span><br><span class="line">  cursor: pointer;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-wrapper:hover &amp;,</span><br><span class="line">  &amp;:hover .#&#123;$radio-inner-prefix-cls&#125;,</span><br><span class="line">  &amp;-input:focus + .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-input:focus + .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    box-shadow: $radio-focus-shadow;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-checked::after &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    border: 1px solid $radio-dot-color;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    visibility: hidden;</span><br><span class="line">    animation: antRadioEffect 0.36s ease-in-out;</span><br><span class="line">    animation-fill-mode: both;</span><br><span class="line">    content: &apos;&apos;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:hover::after,</span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-wrapper:hover &amp;::after &#123;</span><br><span class="line">    visibility: visible;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-inner &#123;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">      $radio-dot-size: $radio-size - 8px;</span><br><span class="line"></span><br><span class="line">      position: absolute;</span><br><span class="line">      top: ($radio-size - $radio-dot-size) / 2 - 1px;</span><br><span class="line">      left: ($radio-size - $radio-dot-size) / 2 - 1px;</span><br><span class="line">      display: table;</span><br><span class="line">      width: $radio-dot-size;</span><br><span class="line">      height: $radio-dot-size;</span><br><span class="line">      background-color: $radio-dot-color;</span><br><span class="line">      border-top: 0;</span><br><span class="line">      border-left: 0;</span><br><span class="line">      border-radius: $radio-dot-size;</span><br><span class="line">      transform: scale(0);</span><br><span class="line">      opacity: 0;</span><br><span class="line">      transition: all $radio-duration $ease-in-out-circ;</span><br><span class="line">      content: &apos; &apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// é€‰ä¸­çŠ¶æ€</span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-checked &#123;</span><br><span class="line">  .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">      transform: scale(1);</span><br><span class="line">      opacity: 1;</span><br><span class="line">      transition: all $radio-duration $ease-in-out-circ;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-disabled &#123;</span><br><span class="line">  .#&#123;$radio-inner-prefix-cls&#125; &#123;</span><br><span class="line">    background-color: $disabled-color;</span><br><span class="line">    border-color: $border-color-base !important;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">      background-color: $radio-dot-disabled-color;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-input &#123;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp; + span &#123;</span><br><span class="line">    color: $disabled-color;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">span.#&#123;$radio-prefix-cls&#125; + * &#123;</span><br><span class="line">  padding-right: 8px;</span><br><span class="line">  padding-left: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.#&#123;$radio-prefix-cls&#125;-button-wrapper &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: $height-base;</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0 $padding-md - 1px;</span><br><span class="line">  color: $radio-button-color;</span><br><span class="line">  font-size: $font-size-base;</span><br><span class="line">  line-height: $height-base - 2px;</span><br><span class="line">  background: $radio-button-bg;</span><br><span class="line">  border: $border-width-base $border-style-base $border-color-base;</span><br><span class="line">  // strange align fix for chrome but works</span><br><span class="line">  // https://gw.alipayobjects.com/zos/rmsportal/VFTfKXJuogBAXcvfAUWJ.gif</span><br><span class="line">  border-top-width: $border-width-base + 0.02px;</span><br><span class="line">  border-left-width: 0;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  transition: color 0.3s, background 0.3s, border-color 0.3s, box-shadow 0.3s;</span><br><span class="line"></span><br><span class="line">  a &#123;</span><br><span class="line">    color: $radio-button-color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &gt; .#&#123;$radio-prefix-cls&#125;-button &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    width: 0;</span><br><span class="line">    height: 0;</span><br><span class="line">    margin-left: 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-group-prefix-cls&#125;-large &amp; &#123;</span><br><span class="line">    height: $height-lg;</span><br><span class="line">    font-size: $font-size-lg;</span><br><span class="line">    line-height: $height-lg - 2px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-group-prefix-cls&#125;-small &amp; &#123;</span><br><span class="line">    height: $height-sm;</span><br><span class="line">    padding: 0 $control-padding-horizontal-sm - 1px;</span><br><span class="line">    line-height: $height-sm - 2px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:not(:first-child) &#123;</span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      position: absolute;</span><br><span class="line">      top: $border-width-base * -1;</span><br><span class="line">      left: -1px;</span><br><span class="line">      display: block;</span><br><span class="line">      box-sizing: content-box;</span><br><span class="line">      width: 1px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      padding: $border-width-base 0;</span><br><span class="line">      background-color: $border-color-base;</span><br><span class="line">      transition: background-color 0.3s;</span><br><span class="line">      content: &apos;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:first-child &#123;</span><br><span class="line">    border-left: $border-width-base $border-style-base $border-color-base;</span><br><span class="line">    border-radius: $border-radius-base 0 0 $border-radius-base;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:last-child &#123;</span><br><span class="line">    border-radius: 0 $border-radius-base $border-radius-base 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:first-child:last-child &#123;</span><br><span class="line">    border-radius: $border-radius-base;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    color: $radio-dot-color;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;:focus-within &#123;</span><br><span class="line">    box-shadow: $radio-button-focus-shadow;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-prefix-cls&#125;-inner,</span><br><span class="line">  input[type=&apos;checkbox&apos;],</span><br><span class="line">  input[type=&apos;radio&apos;] &#123;</span><br><span class="line">    width: 0;</span><br><span class="line">    height: 0;</span><br><span class="line">    opacity: 0;</span><br><span class="line">    pointer-events: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-checked:not(&amp;-disabled) &#123;</span><br><span class="line">    z-index: 1;</span><br><span class="line">    color: $radio-dot-color;</span><br><span class="line">    background: $radio-button-checked-bg;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line"></span><br><span class="line">    &amp;::before &#123;</span><br><span class="line">      background-color: $radio-dot-color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:first-child &#123;</span><br><span class="line">      border-color: $radio-dot-color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      color: $radio-button-hover-color;</span><br><span class="line">      border-color: $radio-button-hover-color;</span><br><span class="line">      &amp;::before &#123;</span><br><span class="line">        background-color: $radio-button-hover-color;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:active &#123;</span><br><span class="line">      color: $radio-button-active-color;</span><br><span class="line">      border-color: $radio-button-active-color;</span><br><span class="line">      &amp;::before &#123;</span><br><span class="line">        background-color: $radio-button-active-color;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;:focus-within &#123;</span><br><span class="line">      box-shadow: $radio-button-focus-shadow;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .#&#123;$radio-group-prefix-cls&#125;-solid &amp;-checked:not(&amp;-disabled) &#123;</span><br><span class="line">    color: $radio-solid-checked-color;</span><br><span class="line">    background: $radio-dot-color;</span><br><span class="line">    border-color: $radio-dot-color;</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      color: $radio-solid-checked-color;</span><br><span class="line">      background: $radio-button-hover-color;</span><br><span class="line">      border-color: $radio-button-hover-color;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:active &#123;</span><br><span class="line">      color: $radio-solid-checked-color;</span><br><span class="line">      background: $radio-button-active-color;</span><br><span class="line">      border-color: $radio-button-active-color;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:focus-within &#123;</span><br><span class="line">      box-shadow: $radio-button-focus-shadow;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-disabled &#123;</span><br><span class="line">    color: $disabled-color;</span><br><span class="line">    background-color: $disabled-bg;;</span><br><span class="line">    border-color: $border-color-base;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line"></span><br><span class="line">    &amp;:first-child,</span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      color: $disabled-color;</span><br><span class="line">      background-color: $disabled-bg;;</span><br><span class="line">      border-color: $border-color-base;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;:first-child &#123;</span><br><span class="line">      border-left-color: $border-color-base;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;-disabled &amp;-checked &#123;</span><br><span class="line">    color: $radio-disabled-button-checked-color;</span><br><span class="line">    background-color: $radio-disabled-button-checked-bg;</span><br><span class="line">    border-color: $border-color-base;</span><br><span class="line">    box-shadow: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes antRadioEffect &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    transform: scale(1);</span><br><span class="line">    opacity: 0.5;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    transform: scale(1.6);</span><br><span class="line">    opacity: 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Firefox hack</span><br><span class="line">@supports (-moz-appearance: meterbar) and (background-blend-mode: difference, normal) &#123;</span><br><span class="line">  .#&#123;$radio-prefix-cls&#125; &#123;</span><br><span class="line">    vertical-align: text-bottom;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º styles/variables/_radio.scssæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;./common&quot;;</span><br><span class="line">// $font-size-base</span><br><span class="line">$radio-wrapper-margin-right: 8px;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/styles/index.scssæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// radioæ ·å¼</span><br><span class="line">@import &quot;../components/Radio/style&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¥ä¸‹æ¥<a href="https://www.jianshu.com/p/1e262b487f26" target="_blank" rel="noopener">[Typescript] ä¸ºç¬¬ä¸‰æ–¹åº“æ·»åŠ å£°æ˜æ–‡ä»¶ .d.ts</a></p>
</li>
<li><p>æ–°å»ºsrc/typings/index.d.tsæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;reference path=&quot;custom-typings.d.ts&quot; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»ºsrc/typings/custom-typings.d.tsæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare module &apos;rc-checkbox&apos;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹App.tsxæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å¢åŠ </span><br><span class="line">import Radio from &quot;./components/Radio/radio&quot;;</span><br><span class="line">&lt;Radio name=&quot;111&quot;&gt;Radio&lt;/Radio&gt;</span><br><span class="line">&lt;Radio name=&quot;111&quot; disabled=&#123;true&#125;&gt;Radio2&lt;/Radio&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹index.tsxæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export &#123; default as Radio &#125; from &quot;./components/Radio&quot;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-è¿è¡Œé¡¹ç›®"><a href="#3-è¿è¡Œé¡¹ç›®" class="headerlink" title="3. è¿è¡Œé¡¹ç›®"></a>3. è¿è¡Œé¡¹ç›®</h2><p> æ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm start</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®é¡¹ç›® å¯ä»¥çœ‹åˆ°Radioç»„ä»¶æˆåŠŸäº†ï¼<br><img src="https://upload-images.jianshu.io/upload_images/11846892-7fc5a5e3af91ee81.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>##4. å•å…ƒæµ‹è¯•<br>æ–°å»ºsrc/Radio/radio.test.tsxæ–‡ä»¶Â·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import &#123; mount, render &#125; from &apos;enzyme&apos;;</span><br><span class="line">import Radio, &#123; Group, Button &#125; from &apos;..&apos;;</span><br><span class="line">import focusTest from &apos;../../../tests/shared/focusTest&apos;;</span><br><span class="line">import mountTest from &apos;../../../tests/shared/mountTest&apos;;</span><br><span class="line">import rtlTest from &apos;../../../tests/shared/rtlTest&apos;;</span><br><span class="line"></span><br><span class="line">describe(&apos;Radio&apos;, () =&gt; &#123;</span><br><span class="line">  focusTest(Radio, &#123; refFocus: true &#125;);</span><br><span class="line">  mountTest(Radio);</span><br><span class="line">  mountTest(Group);</span><br><span class="line">  mountTest(Button);</span><br><span class="line"></span><br><span class="line">  rtlTest(Radio);</span><br><span class="line">  rtlTest(Group);</span><br><span class="line">  rtlTest(Button);</span><br><span class="line"></span><br><span class="line">  it(&apos;should render correctly&apos;, () =&gt; &#123;</span><br><span class="line">    const wrapper = render(&lt;Radio className=&quot;customized&quot;&gt;Test&lt;/Radio&gt;);</span><br><span class="line">    expect(wrapper).toMatchSnapshot();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  it(&apos;responses hover events&apos;, () =&gt; &#123;</span><br><span class="line">    const onMouseEnter = jest.fn();</span><br><span class="line">    const onMouseLeave = jest.fn();</span><br><span class="line"></span><br><span class="line">    const wrapper = mount(&lt;Radio onMouseEnter=&#123;onMouseEnter&#125; onMouseLeave=&#123;onMouseLeave&#125; /&gt;);</span><br><span class="line"></span><br><span class="line">    wrapper.find(&apos;label&apos;).simulate(&apos;mouseenter&apos;);</span><br><span class="line">    expect(onMouseEnter).toHaveBeenCalled();</span><br><span class="line"></span><br><span class="line">    wrapper.find(&apos;label&apos;).simulate(&apos;mouseleave&apos;);</span><br><span class="line">    expect(onMouseLeave).toHaveBeenCalled();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm test</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°å•å…ƒæµ‹è¯•æˆåŠŸé€šè¿‡ï¼<br><img src="https://upload-images.jianshu.io/upload_images/11846892-44fe42fa111d9409.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>##5.ç¼–å†™storybookæ–‡æ¡£</p>
<ul>
<li><p>æ–°å»º<code>src/Radio/radio.stories.tsx</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import &#123; storiesOf &#125; from &apos;@storybook/react&apos;;</span><br><span class="line">import &#123; action &#125; from &apos;@storybook/addon-actions&apos;;</span><br><span class="line"></span><br><span class="line">import Radio from &apos;./radio&apos;</span><br><span class="line"></span><br><span class="line">const defaultRadio = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Radio onClick=&#123;action(&apos;default Radio&apos;)&#125;&gt;default radio&lt;/Radio&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const radioWithDisabled = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Radio onClick=&#123;action(&apos;disabled radio&apos;)&#125;   disabled=&#123;true&#125;&gt;disabled radio&lt;/Radio&gt;</span><br><span class="line">        &lt;Radio onClick=&#123;action(&apos;unDisabled radio&apos;)&#125;  &gt;unDisabled radio&lt;/Radio&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">storiesOf(&apos;Radio æŒ‰é’®&apos;, module)</span><br><span class="line">    .addParameters(&#123;</span><br><span class="line">        info: &#123;</span><br><span class="line">            text: `</span><br><span class="line">        ## å¼•ç”¨æ–¹æ³•</span><br><span class="line">        ~~~js</span><br><span class="line">        import &#123;Radio&#125; from &apos;echo-rui</span><br><span class="line">        ~~~</span><br><span class="line">        `</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .add(&apos;é»˜è®¤ Radio&apos;, defaultRadio)</span><br><span class="line">    .add(&apos;ç¦ç”¨çš„ Radio&apos;,radioWithDisabled)</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run storybook</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æµè§ˆå™¨æ‰“å¼€<a href="http://localhost:9009/,å¯ä»¥çœ‹åˆ°ç»„ä»¶åº“æ–‡æ¡£ç”Ÿæˆäº†ã€‚" target="_blank" rel="noopener">http://localhost:9009/,å¯ä»¥çœ‹åˆ°ç»„ä»¶åº“æ–‡æ¡£ç”Ÿæˆäº†ã€‚</a><br><img src="https://upload-images.jianshu.io/upload_images/11846892-88eb962e94583778.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>##5. å‘å¸ƒåˆ°npm<br> âœ… âœ… âœ… âœ… âœ…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/reactCom2/" data-id="ckd4b4q2l001zt2p3sh193kvd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-reactCom1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/reactCom1/" class="article-date">
  <time datetime="2020-07-27T09:16:46.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/reactCom1/">ä½¿ç”¨reactæ­å»ºç»„ä»¶åº“--iconç»„ä»¶</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>####å‰è¨€<br>ä½ åº”è¯¥éœ€è¦ï¼š<a href="[https://www.jianshu.com/p/8ef96e06adcc](https://www.jianshu.com/p/8ef96e06adcc">ä½¿ç”¨reactæ­å»ºç»„ä»¶åº“ï¼šreact+typescript+storybook</a><br>)</p>
<p>##1. å®‰è£…ä¾èµ–<br>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <code>fortawesome</code>ï¼š <a href="http://www.fontawesome.com.cn" target="_blank" rel="noopener">ä¸€å¥—ç»ä½³çš„å›¾æ ‡å­—ä½“åº“å’ŒCSSæ¡†æ¶</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install @fortawesome/fontawesome-svg-core</span><br><span class="line">npm install @fortawesome/free-solid-svg-icons</span><br><span class="line">npm install @fortawesome/react-fontawesome</span><br></pre></td></tr></table></figure>
<p>##2. ç¼–å†™ç»„ä»¶</p>
<ul>
<li><p>æ–°å»º <code>src/components/Icon/icon.tsx</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; FC &#125; from &quot;react&quot;;</span><br><span class="line">import classnames from &quot;classnames&quot;;</span><br><span class="line">import &#123; library &#125; from &quot;@fortawesome/fontawesome-svg-core&quot;;</span><br><span class="line">import &#123; fas &#125; from &quot;@fortawesome/free-solid-svg-icons&quot;;</span><br><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line">  FontAwesomeIconProps,</span><br><span class="line">  FontAwesomeIcon,</span><br><span class="line">&#125; from &quot;@fortawesome/react-fontawesome&quot;;</span><br><span class="line"></span><br><span class="line">library.add(fas);</span><br><span class="line"></span><br><span class="line">export type theme = </span><br><span class="line">| &quot;primary&quot;</span><br><span class="line">| &quot;secondary&quot;</span><br><span class="line">| &quot;success&quot;</span><br><span class="line">| &quot;info&quot;</span><br><span class="line">| &quot;warning&quot;</span><br><span class="line">| &quot;danger&quot;</span><br><span class="line">| &quot;light&quot;</span><br><span class="line">| &quot;dark&quot;;</span><br><span class="line"></span><br><span class="line">export interface IconProps extends FontAwesomeIconProps &#123;</span><br><span class="line">  /** ä¸»é¢˜é¢œè‰² */</span><br><span class="line">  theme?: theme;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export const Icon: FC&lt;IconProps&gt; = (props) =&gt; &#123;</span><br><span class="line">  const &#123; className, theme, ...restProps &#125; = props;</span><br><span class="line">  const classes = classnames(&quot;lin-icon&quot;, className, &#123;</span><br><span class="line">    [`lin-icon-$&#123;theme&#125;`]: theme,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return &lt;FontAwesomeIcon className=&#123;classes&#125; &#123;...restProps&#125; /&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Icon;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/Icon/index.tsx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import Icon from &quot;./icon&quot;;</span><br><span class="line"></span><br><span class="line">export default Icon;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/components/Icon/_style.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;../../styles/variables/icon&quot;;</span><br><span class="line">// å¾ªç¯</span><br><span class="line">@each $key, $val in $icon-theme-color &#123;</span><br><span class="line">  .lin-icon-#&#123;$key&#125; &#123;</span><br><span class="line">    color: $val;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º styles/variables/_icon.scssæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;./common&quot;;</span><br><span class="line"></span><br><span class="line">$icon-theme-color: (</span><br><span class="line">  &quot;primary&quot;: $primary,</span><br><span class="line">  &quot;secondary&quot;: $secondary,</span><br><span class="line">  &quot;success&quot;: $success,</span><br><span class="line">  &quot;info&quot;: $info,</span><br><span class="line">  &quot;warning&quot;: $warning,</span><br><span class="line">  &quot;danger&quot;: $danger,</span><br><span class="line">  &quot;light&quot;: $light,</span><br><span class="line">  &quot;dark&quot;: $dark,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º src/styles/index.scssæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// iconæ ·å¼</span><br><span class="line">@import &quot;../components/Icon/style&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹App.tsxæ–‡ä»¶<br>ï¼ï¼ å¯¹äº<code>fortawesome</code>ï¼š [ä¸€å¥—ç»ä½³çš„å›¾æ ‡å­—ä½“åº“å’ŒCSSæ¡†æ¶]ä¸­çš„å›¾æ ‡éƒ½å¯ä»¥ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å¢åŠ </span><br><span class="line">import Icon from &quot;./components/Icon/icon&quot;;</span><br><span class="line">&lt;Icon icon=&quot;coffee&quot; size=&quot;5x&quot; theme=&quot;danger&quot; /&gt;</span><br><span class="line">&lt;Icon icon=&quot;arrow-down&quot; size=&quot;5x&quot; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹index.tsxæ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export &#123; default as Icon &#125; from &quot;./components/Icon&quot;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-è¿è¡Œé¡¹ç›®"><a href="#3-è¿è¡Œé¡¹ç›®" class="headerlink" title="3. è¿è¡Œé¡¹ç›®"></a>3. è¿è¡Œé¡¹ç›®</h2><p> æ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm start</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®é¡¹ç›® å¯ä»¥çœ‹åˆ°Iconç»„ä»¶æˆåŠŸäº†ï¼<br><img src="https://upload-images.jianshu.io/upload_images/11846892-8c703c6cd972d3e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>##4.ç¼–å†™storybookæ–‡æ¡£</p>
<ul>
<li><p>æ–°å»º<code>src/Icon/icon.stories.tsx</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">import &#123; storiesOf &#125; from &apos;@storybook/react&apos;</span><br><span class="line"></span><br><span class="line">import Icon from &apos;./icon&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const defaultIcon = () =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;check&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;times&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                className=&apos;ml-20&apos;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;anchor&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                className=&apos;ml-20&apos;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;trash&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                className=&apos;ml-20&apos;</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const iconWithTheme = () =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;check&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                theme=&quot;success&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;times&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                theme=&quot;danger&quot;</span><br><span class="line">                className=&apos;ml-20&apos;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;anchor&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                theme=&quot;primary&quot;</span><br><span class="line">                className=&apos;ml-20&apos;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;exclamation-circle&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                theme=&quot;warning&quot;</span><br><span class="line">                className=&apos;ml-20&apos;</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const iconWithOther = () =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;spinner&quot;</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                spin</span><br><span class="line">                theme=&quot;primary&quot;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Icon</span><br><span class="line">                icon=&quot;spinner&quot;</span><br><span class="line">                pulse</span><br><span class="line">                size=&quot;3x&quot;</span><br><span class="line">                theme=&quot;success&quot;</span><br><span class="line">                className=&apos;ml-20&apos;</span><br><span class="line">            /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">storiesOf(&apos;Icon ç»„ä»¶&apos;, module)</span><br><span class="line">    .addParameters(&#123;</span><br><span class="line">        info: &#123;</span><br><span class="line">            text: `</span><br><span class="line">            ## å¼•ç”¨æ–¹æ³•</span><br><span class="line">            ~~~js</span><br><span class="line">            import &#123;Icon&#125; from &apos;lin-react-ui</span><br><span class="line">            ~~~</span><br><span class="line">            `</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .add(&apos;é»˜è®¤çš„ Icon&apos;, defaultIcon)</span><br><span class="line">    .add(&apos;ä¸åŒä¸»é¢˜çš„ Icon&apos;, iconWithTheme)</span><br><span class="line">    .add(&apos;æ›´å¤šè¡Œä¸ºçš„ Icon&apos;, iconWithOther,&#123;</span><br><span class="line">        info: &#123;</span><br><span class="line">            text: `</span><br><span class="line">            ## å¼•ç”¨æ–¹æ³•</span><br><span class="line">            ~~~js</span><br><span class="line">            import &#123;Icon&#125; from &apos;lin-react-ui</span><br><span class="line">            ~~~</span><br><span class="line">            æ›´å¤šä¾‹å­è¯·å‚è§ï¼šhttps://github.com/FortAwesome/react-fontawesome#basic</span><br><span class="line">            `</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run storybook</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æµè§ˆå™¨æ‰“å¼€<a href="http://localhost:9009/,å¯ä»¥çœ‹åˆ°ç»„ä»¶åº“æ–‡æ¡£ç”Ÿæˆäº†ã€‚" target="_blank" rel="noopener">http://localhost:9009/,å¯ä»¥çœ‹åˆ°ç»„ä»¶åº“æ–‡æ¡£ç”Ÿæˆäº†ã€‚</a><br><img src="https://upload-images.jianshu.io/upload_images/11846892-f5e3bf4ef4168c78.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>##5. å‘å¸ƒåˆ°npm<br> âœ… âœ… âœ… âœ… âœ…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/reactCom1/" data-id="ckd4b4q2h001rt2p3du6hqxmp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vueMessage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/vueMessage/" class="article-date">
  <time datetime="2020-07-27T09:15:39.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/vueMessage/">è§£è¯»element-ui-----this.$message()</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å¹³æ—¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯å…ˆå†™å¥½ä¸€ä¸ªç»„ä»¶ï¼Œç„¶ååœ¨éœ€è¦çš„é¡µé¢ä¸­ç”¨ <code>import</code> å¼•å…¥å³å¯ï¼Œä½†å¦‚æœæ˜¯ä¸‹é¢è¿™ç§ç±»å‹çš„ç»„ä»¶å‘¢ğŸ‘‡</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11846892-a36600e65a733412?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>ä¸Šé¢è¿™ç§ç±»å‹çš„æµ®å±‚æç¤ºæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯ä½¿ç”¨é¢‘ç‡ç‰¹åˆ«é«˜ï¼Œå‡ ä¹æ¯ä¸ªé¡µé¢éƒ½ä¼šç”¨åˆ°å®ƒï¼Œäºæ˜¯ä¹æˆ‘ä»¬å°±è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­å»å¼•å…¥è¯¥ç»„ä»¶ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªé¡µé¢éƒ½å¾—é€šè¿‡ä¸€ä¸ªå˜é‡æ¥æ§åˆ¶å®ƒçš„æ˜¾éšï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ğŸ™…ã€‚ã€‚ã€‚é‚£æˆ‘ä»¬æƒ³è¦çš„æ˜¯ä»€ä¹ˆæ ·å‘¢ğŸ¤”ï¼Ÿç”¨è¿‡ä¸€äº› UI æ¡†æ¶çš„åŒå­¦ä»¬åº”è¯¥çŸ¥é“æœ‰è¿™æ ·ä¸€ç§ç”¨æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">this.$message(&#123;</span><br><span class="line">    duration: 3000,</span><br><span class="line">    content: &apos;è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯æç¤º&apos;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ²¡é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•çš„ä¸€å¥è¯å°±ä¸‡äº‹å¤§å‰äº†ï¼ˆå°±æ˜¯ç”¨ js è°ƒç”¨ç»„ä»¶è€Œå·²å•¦ğŸ§ï¼‰ã€‚é‚£è¿™ç§æ•ˆæœç©¶ç«Ÿæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿä»Šå¤©å°±è®©æˆ‘ä»¬æ¥ï¼ˆæ‰‹æŠŠæ‰‹ğŸ¤ ï¼‰ä¸€æ¢ç©¶ç«Ÿå§ï¼</p>
<h2 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h2><p>ä¸çŸ¥é“å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰ç”¨è¿‡ <code>Vue.extend()</code> è¿™ä¸ªä¸œä¸œï¼Œåæ­£æˆ‘æ˜¯å¾ˆå°‘ç¢°è¿‡ï¼Œå°è±¡ä¸æ·±ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å…ˆæ¥çŸ­æš‚äº†è§£ä¸€ä¸‹ <code>Vue.extend()</code> ä¸»è¦æ˜¯ç”¨æ¥å¹²å˜›çš„ã€‚å…ˆæ¥ä¸ªå®˜æ–¹è¯´æ˜ï¼ˆä¸å¤šçš„ï¼ŒåšæŒä¸‹ï¼‰ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11846892-562ca3309f3120c7?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<p>æ²¡æ€ä¹ˆçœ‹æ‡‚ï¼ŸğŸ˜´æ²¡å…³ç³»ï¼Œä¸é‡è¦ï¼Œä½ åªè¦è®°ä½ï¼ˆåŠ å°‘è®¸ç†è§£ï¼‰ä»¥ä¸‹ç”¨æ³•å³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// å¯¼å…¥ä»¥å¾€çš„æ™®é€šç»„ä»¶</span><br><span class="line">import Main from &apos;./main.vue&apos;;</span><br><span class="line">// ç”¨ Vue.extend åˆ›å»ºç»„ä»¶çš„æ¨¡æ¿ï¼ˆæ„é€ å‡½æ•°ï¼‰</span><br><span class="line">let mainConstructor = Vue.extend(Main);</span><br><span class="line">// å®ä¾‹åŒ–ç»„ä»¶</span><br><span class="line">let instance = new mainConstructor();</span><br><span class="line">// æŒ‚è½½åˆ°ç›¸åº”çš„å…ƒç´ ä¸Š</span><br><span class="line">instance.$mount(&apos;#app&apos;);</span><br></pre></td></tr></table></figure>
<p>ä¸çŸ¥é“ä½ çœ‹æ‡‚æ²¡æœ‰ï¼Œä¸Šé¢çš„ <code>Vue.extend(Main)</code> å°±æ˜¯ä¸€ä¸ªåŸºäº main.vue çš„ç»„ä»¶æ¨¡æ¿ï¼ˆæ„é€ å‡½æ•°ï¼‰ï¼Œ<code>instance</code> æ˜¯å®ä¾‹åŒ–çš„ç»„ä»¶ï¼Œ<code>$mount()</code> æ˜¯æ‰‹åŠ¨æŒ‚è½½çš„æ„æ€ã€‚å…¶ä¸­ <code>Vue.extend()</code> å’Œ <code>$mount()</code> å°±æ˜¯æˆ‘ä»¬é€šè¿‡ js è°ƒç”¨ã€æ¸²æŸ“å¹¶æŒ‚è½½ç»„ä»¶çš„ç²¾é«“æ‰€åœ¨ï¼Œç›¸å½“äºæ—©å‰çš„ <code>createElement</code> å’Œ <code>appendChild</code>ï¼Œæœ‰å¼‚æ›²åŒå·¥ä¹‹æ•ˆã€‚è¿™ä¸ªç‚¹éœ€è¦æˆ‘ä»¬å¥½å¥½ç†Ÿæ‚‰ä¸€ä¸‹ï¼Œæ‰€ä»¥ä½ å¯ä»¥å…ˆåœä¸‹æ¥å±¡å±¡æ€è·¯ğŸ¤”ã€‚<br>è¡¥å……ä¸€ä¸‹ğŸ¤ï¼š<code>$mount()</code> é‡Œé¢å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œè¯´æ˜ç»„ä»¶åªæ˜¯æ¸²æŸ“äº†ä½†è¿˜æ²¡æœ‰æŒ‚è½½åˆ°é¡µé¢ä¸Šï¼Œå¦‚æœæœ‰æ­£ç¡®çš„ï¼ˆå…ƒç´ ï¼‰å‚æ•°åˆ™ç›´æ¥æŒ‚è½½åˆ°å…ƒç´ ä¸‹é¢ã€‚</p>
<h2 id="å†™ä¸€ä¸ª-message-ç»„ä»¶"><a href="#å†™ä¸€ä¸ª-message-ç»„ä»¶" class="headerlink" title="å†™ä¸€ä¸ª message ç»„ä»¶"></a>å†™ä¸€ä¸ª message ç»„ä»¶</h2><p>js è°ƒç”¨å½’è°ƒç”¨ï¼Œæœ€åŸå§‹çš„ç»„ä»¶è¿˜æ˜¯è¦æœ‰çš„ï¼Œåªæ˜¯æˆ‘ä»¬ä¸é€šè¿‡ <code>import</code> æ¥å¼•å…¥åˆ°é¡µé¢ä¸­è€Œå·²ã€‚okï¼Œæˆ‘ä»¬å°±ä»¥æœ€å¼€å§‹çš„é‚£ä¸ª messageå›¾ç‰‡æ¥ç®€å•å†™ä¸€ä¸‹è¿™ä¸ª vue ç»„ä»¶ï¼ˆelement-uiä¸­çš„message å’Œ alert ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰ã€‚è¿™é‡Œå°±ç›´æ¥ä¸Šä»£ç å•¦ï¼Œæ¯•ç«Ÿå®ƒçš„ç»“æ„ç®€å•åˆ°çˆ†äº†ï¼Œä¹Ÿä¸æ˜¯æœ¬ç« èŠ‚çš„é‡ç‚¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- message.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;echojoy-message&quot; &gt;</span><br><span class="line">    &lt;p&gt;æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;EchojoyMessage&quot;,</span><br><span class="line">  </span><br><span class="line">  mounted() &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        // 3s åé€šè¿‡çˆ¶çº§ç§»é™¤å­å…ƒç´ çš„æ–¹å¼æ¥ç§»é™¤è¯¥ç»„ä»¶å®ä¾‹å’Œ DOM èŠ‚ç‚¹</span><br><span class="line">        this.$destroy(true);</span><br><span class="line">        this.$el.parentNode.removeChild(this.$el);</span><br><span class="line">      &#125;, 3000);</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.echojoy-message &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  color: #fff;</span><br><span class="line">  z-index: 9999;</span><br><span class="line">  background: transparent;</span><br><span class="line">  &gt; p &#123;</span><br><span class="line">    padding: 12px 22px;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    background: rgba(17, 17, 17, 0.7);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å†…å®¹æƒ³å¿…å¤§å®¶åº”è¯¥éƒ½èƒ½çœ‹æ‡‚ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç›´æ¥è®²ä¸‹é¢çš„é‡ç‚¹äº†ã€‚</p>
<h2 id="å†™ä¸€ä¸ª-message-js"><a href="#å†™ä¸€ä¸ª-message-js" class="headerlink" title="å†™ä¸€ä¸ª message.js"></a>å†™ä¸€ä¸ª message.js</h2><p>æˆ‘ä»¬åœ¨ message.vue çš„åŒçº§ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª message.js æ–‡ä»¶ã€‚æˆ‘ä»¬å…ˆçŸä¸€çœ¼æ–‡ä»¶å†…å®¹ï¼ˆä¹Ÿä¸å¤šï¼Œå·²ç»æ˜¯ä¸ªæœ€ç®€ç‰ˆäº†ï¼‰ğŸ‘‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// message.js</span><br><span class="line">import Vue from &quot;vue&quot;; // å¼•å…¥ Vue æ˜¯å› ä¸ºè¦ç”¨åˆ° Vue.extend() è¿™ä¸ªæ–¹æ³•</span><br><span class="line">import message from &quot;./message.vue&quot;; // å¼•å…¥åˆšæ‰çš„ toast ç»„ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const Toast = function() &#123;</span><br><span class="line">  instance = new ToastConstructor().$mount(); // æ¸²æŸ“ç»„ä»¶</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">let messageConstructor = Vue.extend(message); // è¿™ä¸ªåœ¨å‰é¢çš„å‰ç½®çŸ¥è¯†å†…å®¹é‡Œé¢æœ‰è®²åˆ°</span><br><span class="line">let instance;</span><br><span class="line"></span><br><span class="line">const Message = function (options = &#123;&#125;) &#123;</span><br><span class="line">    instance = new messageConstructor().$mount(); // æ¸²æŸ“ç»„ä»¶</span><br><span class="line">    document.body.appendChild(instance.$el); // æŒ‚è½½åˆ° body ä¸‹</span><br><span class="line">&#125;;</span><br><span class="line">export default Message;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç æš´éœ²äº†ä¸€ä¸ª Message å‡½æ•°ã€‚ä¸ºä»€ä¹ˆè¦æš´éœ²ä¸€ä¸ªå‡½æ•°å‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼šä½ æƒ³æƒ³ï¼Œæˆ‘ä»¬æœ€ç»ˆæ˜¯ä¸æ˜¯è¦æ ¹æ® <code>this.$Message ()</code> æ¥è°ƒç”¨ä¸€ä¸ªç»„ä»¶ï¼Œè¯´ç™½äº†ï¼Œé€šè¿‡ js è°ƒç”¨ï¼Œæœ¬è´¨å°±æ˜¯è°ƒç”¨ä¸€ä¸ª å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ <code>this.$Message ()</code> å°±æ˜¯æ‰§è¡Œäº†ä¸Šé¢ä»£ç ä¸­å¯¼å‡ºçš„ <code>export default Message</code>ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œäº† Message å‡½æ•°ï¼ˆ<code>const Message = function() {}</code>ï¼‰ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è°ƒç”¨ <code>this.$Message()</code> çš„æ—¶å€™å…¶å®å°±æ˜¯æ‰§è¡Œäº† <code>Message()</code> å‡½æ•°ã€‚è€Œ <code>Message()</code> å‡½æ•°åªåšäº†ä¸€ä»¶äº‹æƒ…ï¼šå°±æ˜¯é€šè¿‡æ‰‹åŠ¨æŒ‚è½½çš„æ–¹å¼æŠŠç»„ä»¶æŒ‚è½½åˆ° body ä¸‹é¢ã€‚<br>è¡¥å……ä¸€ä¸‹ğŸ¤ï¼šä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¸¸è§çš„æ˜¯ <code>$mount(&quot;#app&quot;)</code>ï¼Œä¹Ÿå°±æ˜¯æŠŠç»„ä»¶æŒ‚è½½åˆ° <code>#app</code> ä¸‹é¢ï¼Œ<code>&lt;router-view /&gt;</code> ä¹ŸåŒ…å«åœ¨ <code>#app</code> ä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™ç§ Messageæç¤ºæ˜¯æ”¾åœ¨ <code>body</code> ä¸‹é¢çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸å— <code>#app</code> å’Œ <code>&lt;router-view /&gt;</code> çš„ç®¡æ§ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åˆ‡æ¢é¡µé¢ï¼ˆè·¯ç”±ï¼‰çš„æ—¶å€™ï¼Œè¿™ä¸ª Message ç»„ä»¶æ˜¯ä¸ä¼šè·Ÿç€ç«‹é©¬æ¶ˆå¤±çš„ï¼Œè¿™ç‚¹è¦æ³¨æ„å“¦ğŸ˜¯ã€‚<br>è¿™é‡Œé¡ºä¾¿ç»™ä¸ªç»„ä»¶çš„ç›®å½•ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://upload-images.jianshu.io/upload_images/11846892-2e4a12e3b5f5da91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="message.png"></p>
<h2 id="å¼€å§‹è°ƒç”¨"><a href="#å¼€å§‹è°ƒç”¨" class="headerlink" title="å¼€å§‹è°ƒç”¨"></a>å¼€å§‹è°ƒç”¨</h2><p>è°ƒç”¨æ–¹å¼å¾ˆç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨å…¥å£æ–‡ä»¶ main.jsï¼ˆå’Œä¸Šé¢ä¸æ˜¯åŒä¸€ä¸ªğŸ˜¢ï¼‰ é‡ŒåŠ ä¸Šä¸¤è¡Œä»£ç ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨éœ€è¦çš„åœ°æ–¹ç›´æ¥ç”¨ js è°ƒç”¨å®ƒäº†ï¼Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import EchojoyMessage from &apos;./../packages/message/src/message.js&apos;</span><br><span class="line">Vue.prototype.$message = EchojoyMessage;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨é¡µé¢ä¸­æµ‹è¯•ä¸€ä¸‹ï¼Œå°±åƒä¸‹é¢è¿™æ ·å­ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/11846892-09a2f0e7cbe77528.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ALAERT.png"></p>
<p>è¿è¡Œä¸€ä¸‹ä»£ç ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/11846892-a3c24b73cd995de6?imageMogr2/auto-orient/strip" alt="image"></p>
<figcaption></figcaption>

<p>å—¯ï¼ŒæŒºå¥½ï¼Œå°æœ‰æˆå°±çš„ feel ğŸ‘ğŸ‘ğŸ‘ã€‚</p>
<h2 id="æ”¯æŒå¯ä¼ å‚æ•°"><a href="#æ”¯æŒå¯ä¼ å‚æ•°" class="headerlink" title="æ”¯æŒå¯ä¼ å‚æ•°"></a>æ”¯æŒå¯ä¼ å‚æ•°</h2><p>åˆ«æ€¥ï¼Œæˆ‘ä»¬å¥½åƒè¿˜æ¼äº†ç‚¹ä»€ä¹ˆğŸ¤”ã€‚ã€‚ã€‚å¯¹äº†ï¼Œç°åœ¨è¿˜ä¸æ”¯æŒä¼ å‚å‘¢ï¼Œç›´æ¥è°ƒç”¨ <code>this.$message()</code> å°±åªèƒ½æ˜¾ç¤ºâ€”â€”â€”â€”æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ï¼ˆè¿™ä¸‹å…¨éƒ½æ˜¯åç«¯çš„é”…äº†ğŸ˜Šï¼‰ã€‚ä½†æˆ‘ä»¬å¯æ˜¯ä¸ªæœ‰è¿½æ±‚çš„å‰ç«¯ï¼Œä¸èƒ½å±€é™äºæ­¤ï¼Œæ‰€ä»¥ç°åœ¨è®©æˆ‘ä»¬æ¥å°è¯•å¢åŠ ä¸‹ä¸¤ä¸ªå¯é…ç½®å‚æ•°ï¼Œè¿™é‡Œæ‹¿ <code>duration</code> å’Œ <code>content</code> ä¸¾ä¸ªæ —å­ğŸŒ°ã€‚<br>é¦–å…ˆæˆ‘ä»¬è¦ä¿®æ”¹ message.vue ç»„ä»¶é‡Œé¢çš„å†…å®¹ï¼ˆå…¶å®æ²¡å•¥å¤§å˜åŒ–ï¼‰ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- message.vue å¯é…ç½®ç‰ˆ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div class=&quot;echojoy-message&quot; &gt;</span><br><span class="line">    &lt;p &gt;</span><br><span class="line">      &#123;&#123;content&#125;&#125; </span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ä¸»è¦å°±æ”¹äº† data</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;EchojoyMessage&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      content: &quot;&quot;,</span><br><span class="line">      duration: 3000</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      this.$destroy(true);</span><br><span class="line">      this.$el.parentNode.removeChild(this.$el);</span><br><span class="line">    &#125;, this.duration);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç åº”è¯¥ç®—æ˜¯æµ…æ˜¾æ˜“æ‡‚äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ message.js é‡Œé¢æ”¹äº†å•¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// message.js</span><br><span class="line">import Vue from &quot;vue&quot;; // å¼•å…¥ Vue æ˜¯å› ä¸ºè¦ç”¨åˆ° Vue.extend() è¿™ä¸ªæ–¹æ³•</span><br><span class="line">import message from &quot;./message.vue&quot;; // å¼•å…¥åˆšæ‰çš„ toast ç»„ä»¶</span><br><span class="line"></span><br><span class="line">let messageConstructor = Vue.extend(message); // è¿™ä¸ªåœ¨å‰é¢çš„å‰ç½®çŸ¥è¯†å†…å®¹é‡Œé¢æœ‰è®²åˆ°</span><br><span class="line">let instance;</span><br><span class="line"></span><br><span class="line">const Message = function (options = &#123;&#125;) &#123;</span><br><span class="line">  instance = new messageConstructor(&#123;</span><br><span class="line">    data: options // è¿™é‡Œçš„ data ä¼šä¼ åˆ° message.vue ç»„ä»¶ä¸­çš„ data ä¸­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™åœ¨ props é‡Œ</span><br><span class="line">  &#125;); // æ¸²æŸ“ç»„ä»¶</span><br><span class="line">  document.body.appendChild(instance.$mount().$el); // æŒ‚è½½åˆ° body ä¸‹</span><br><span class="line">&#125;;</span><br><span class="line">export default Message;</span><br></pre></td></tr></table></figure>
<p>å…¶å® message.js ä¹Ÿæ²¡å¤šå¤§å˜åŒ–ï¼Œå°±æ˜¯åœ¨å‡½æ•°é‡Œé¢åŠ äº†ä¸ªå‚æ•°ã€‚è¦æ³¨æ„çš„æ˜¯ <code>new messageConstructor({ data: options })</code> ä¸­çš„ data å°±æ˜¯ message.vue ç»„ä»¶ä¸­çš„ dataï¼Œä¸æ˜¯éšéšä¾¿ä¾¿å–çš„å­—æ®µåï¼Œä¼ å…¥çš„ <code>options</code> ä¼šå’Œç»„ä»¶ä¸­çš„ data åˆå¹¶ï¼ˆVue çš„åŠŸåŠ³ï¼‰ã€‚<br>emã€‚ã€‚ã€‚æ˜¯çš„ï¼Œå°±è¿™ä¹ˆç®€å•ï¼Œç°åœ¨è®©æˆ‘ä»¬ç»§ç»­æ¥è°ƒç”¨ä¸€ä¸‹å®ƒï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    show()&#123;</span><br><span class="line">      this.$message.success(&#123;</span><br><span class="line">        content: &quot;å“ˆå“ˆå“ˆå“ˆï¼Œæ¶ˆå¤±çš„è´¼å¿«&quot;,</span><br><span class="line">        duration: 0</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸‹å°±å¯ä»¥çœ‹åˆ°ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11846892-738632ab3db8fc91?imageMogr2/auto-orient/strip" alt="image"></p>
<figcaption></figcaption>

<p>å½“ç„¶ï¼Œè¿™è¿˜æ²¡å®Œï¼Œæˆ‘ä»¬ç»§ç»­æ·»åŠ ä¸ªå°åŠŸèƒ½ç‚¹ğŸ™„ã€‚ã€‚ã€‚</p>
<h2 id="æ”¯æŒ-this-message-error"><a href="#æ”¯æŒ-this-message-error" class="headerlink" title="æ”¯æŒ this.$message.error()"></a>æ”¯æŒ this.$message.error()</h2><p>è¿™é‡Œæˆ‘ä»¬æ‰“ç®—æ”¯æŒ <code>this.$message.error()</code> å’Œ <code>this.$message.success()</code> è¿™ä¸¤ç§æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥è¿˜æ˜¯è¦å…ˆå»ä¿®æ”¹ä¸€ä¸‹ message.vue æ–‡ä»¶çš„å†…å®¹ï¼ˆä¸»è¦å°±æ˜¯æ ¹æ® <code>type</code> å€¼æ¥ä¿®æ”¹ç»„ä»¶çš„æ ·å¼ï¼‰ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--main.vue--&gt;</span><br><span class="line">&lt;div class=&quot;echojoy-message&quot; :class=&quot;type ? `echojoy-message--$&#123;type&#125;` : &apos;&apos;&quot;&gt;</span><br><span class="line">    &lt;p class=&quot;echojoy-message-content&quot;&gt;</span><br><span class="line">      &#123;&#123;content&#125;&#125; </span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  ...</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      type: &quot;&quot;,</span><br><span class="line">      content: &quot;&quot;,</span><br><span class="line">      duration: 3000</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.echojoy-message&#123;</span><br><span class="line">  ...</span><br><span class="line">  &amp;--error p &#123; background: rgba(255, 0, 0, 0.5); &#125;</span><br><span class="line">  &amp;--success p &#123; background: rgba(0, 255, 0, 0.5); &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>å…¶æ¬¡ï¼Œ<code>this.$message.error()</code> å…¶å®å°±ç­‰ä»·äº <code>Message.error()</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨çš„ç›®çš„å°±æ˜¯è¦ç»™ Messageå‡½æ•°æ‰©å……æ–¹æ³•ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±å…ˆçœ‹ä»£ç å†è§£é‡Šå§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// message.js</span><br><span class="line">const Message= function(options = &#123;&#125;) &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;;</span><br><span class="line">// ä»¥ä¸‹å°±æ˜¯åœ¨ Messageå‡½æ•°ä¸­æ‹“å±• [&quot;success&quot;, &quot;error&quot;] è¿™ä¸¤ä¸ªæ–¹æ³•</span><br><span class="line"></span><br><span class="line">[&quot;success&quot;, &quot;error&quot;].forEach(type =&gt; &#123;</span><br><span class="line">  Message[type] = options =&gt; &#123;</span><br><span class="line">    options.type = type;</span><br><span class="line">    return Message(options);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default Message;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>Message.error()</code> å’Œ <code>Message.success()</code> æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨ <code>Message(options)</code> è¿™ä¸ªå‡½æ•°ï¼Œåªä¸è¿‡åœ¨è°ƒç”¨ä¹‹å‰éœ€è¦å¤šåšä¸€æ­¥å¤„ç†ï¼Œå°±æ˜¯å°† <code>[&quot;success&quot;, &quot;error&quot;]</code> ä½œä¸ºä¸€ä¸ª <code>type</code> å‚æ•°ç»™åˆå¹¶è¿› <code>options</code> é‡Œé¢å†ä¼ é€’ï¼Œä»…æ­¤è€Œå·²ğŸ˜¬ã€‚<br>é‚£å°±è¯•è¯•æ•ˆæœå§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    show() &#123;</span><br><span class="line">      this.$message(&#123; content: &quot;è¿™æ˜¯æ­£å¸¸çš„&quot; &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    showError() &#123;</span><br><span class="line">      this.$message.error(&#123; content: &quot;ç«Ÿç„¶å¤±è´¥äº†&quot; &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    showSuccess() &#123;</span><br><span class="line">      this.$message.success(&#123; content: &quot;å±…ç„¶æˆåŠŸäº†&quot; &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/11846892-6435ed3c174a7160?imageMogr2/auto-orient/strip" alt="image"></p>
<h2 id="duration-lt-0-messageä¸€ç›´å­˜åœ¨"><a href="#duration-lt-0-messageä¸€ç›´å­˜åœ¨" class="headerlink" title="duration &lt;= 0,messageä¸€ç›´å­˜åœ¨"></a>duration &lt;= 0,messageä¸€ç›´å­˜åœ¨</h2><ul>
<li>ä¼ å…¥å‚æ•°énumberç±»å‹<br>é¦–å…ˆæˆ‘ä»¬ä¸ºäº†è®©ç»„ä»¶å¯ä»¥åœ¨ä¼ å…¥é”™è¯¯ç±»å‹çš„durationæ˜¯èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œåšäº†ä¸€ä¸ªå°å°çš„å…¼å®¹ï¼Œåˆ¤æ–­å˜é‡ç±»å‹æ˜¯å¦ä¸ºnumberï¼Œénumberç±»å‹ï¼Œæ§åˆ¶å°è¾“å‡ºé”™è¯¯ï¼Œå¹¶å¼ºè¡Œè½¬åŒ–durationä¸ºæ•°å­—1000.ï¼ˆå¤„ç†åŠæ³•ç›¸å½“ç²—æš´äº†ï¼ï¼ï¼‰</li>
<li>ä¼ å…¥å‚æ•°ä¸ºnumberç±»å‹ç§»é™¤è¯¥ç»„ä»¶å®ä¾‹å’Œ DOM èŠ‚ç‚¹<br><code>&gt;0</code><br>åœ¨durationçš„æ—¶é—´èŒƒå›´å†…ï¼Œç§»é™¤è¯¥ç»„ä»¶å®ä¾‹å’Œ DOM èŠ‚ç‚¹<br><code>&lt;=0</code><br>ä¸åšä»»ä½•å¤„ç†<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mounted() &#123;</span><br><span class="line">    if (typeof this.duration !== &apos;number&apos; ) &#123;</span><br><span class="line">      console.error(&apos;the duration must be a number!&apos;)</span><br><span class="line">      this.duration = 1000</span><br><span class="line">    &#125;</span><br><span class="line">    if (this.duration &gt; 0) &#123;</span><br><span class="line">      setTimeout(() =&gt; &#123;</span><br><span class="line">        // 3s åé€šè¿‡çˆ¶çº§ç§»é™¤å­å…ƒç´ çš„æ–¹å¼æ¥ç§»é™¤è¯¥ç»„ä»¶å®ä¾‹å’Œ DOM èŠ‚ç‚¹</span><br><span class="line">        this.$destroy(true);</span><br><span class="line">        this.$el.parentNode.removeChild(this.$el);</span><br><span class="line">      &#125;, this.duration);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="æ‰‹åŠ¨å…³é—­message"><a href="#æ‰‹åŠ¨å…³é—­message" class="headerlink" title="æ‰‹åŠ¨å…³é—­message"></a>æ‰‹åŠ¨å…³é—­message</h2><p>åœ¨domç»“æ„ä¸Šè®¾ç½®å¯ä»¥æ‰§è¡Œå…³é—­çš„iconå›¾æ ‡,æ·»åŠ äº‹ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;i class=&quot;echojoy-icon-close echojoy-message-close&quot; @click=&quot;close&quot;&gt;&lt;/i&gt;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨scriptsä¸­å¢åŠ å‡½æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">    close()&#123;</span><br><span class="line">      this.$destroy(true);</span><br><span class="line">      this.$el.parentNode.removeChild(this.$el);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h4><p>å†è§å§ï¼</p>
<p>å‚è€ƒ è¿æ¥ï¼š<a href="https://juejin.im/post/5ca20e426fb9a05e42555d1d" target="_blank" rel="noopener">https://juejin.im/post/5ca20e426fb9a05e42555d1d</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/vueMessage/" data-id="ckd4b4q2r0028t2p3snkjmcr6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Node1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/Node1/" class="article-date">
  <time datetime="2020-07-27T09:13:28.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/Node1/">NO1:ä½¿ç”¨ Node.js + Express å¼€å‘æœåŠ¡ç«¯</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ä¸€ã€-å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€-å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€ å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€ å‡†å¤‡å·¥ä½œ</h1><hr>
<p>####1.å®‰è£…Express<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install express -g</span><br><span class="line">$ npm install express-generator -g</span><br></pre></td></tr></table></figure></p>
<p>####2.åˆå§‹åŒ–é¡¹ç›®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /Users/SPRINT/Desktop è¿›å…¥æ¡Œé¢</span><br><span class="line">$ express é¡¹ç›®åç§°</span><br></pre></td></tr></table></figure></p>
<p>é¡¹ç›®åç§°æˆ‘ä»¬æŒ‡å®šä¸ºAPIServerï¼Œä»é¡¹ç›®åç§°å¯ä»¥çœ‹å‡º æˆ‘ä»¬æ˜¯æ¨¡æ‹ŸæœåŠ¡å™¨API<br>åœ¨è¿™é‡Œæˆ‘ä»¬å°†æä¾›ä¸€ä¸ªè·å–ç”¨æˆ·è¯¦æƒ…æ¥å£ å¹¶è¾“å‡ºJSONæ•°æ®ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/11846892-f958d66e6ce428e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>åœ¨ç»ˆç«¯æœ€åä½ç½® çœ‹åˆ°è¾“å‡ºä¸¤ä¸ªå‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">install dependencies:</span><br><span class="line">   $ cd APIServer &amp;&amp; npm install //å‘Šè¯‰æˆ‘ä»¬è¿›å…¥é¡¹ç›®æ ¹ç›®å½• æ‰§è¡Œnpm installå®‰è£…ä¾èµ–æ¨¡å—</span><br><span class="line"></span><br><span class="line">run the app:</span><br><span class="line">   $ DEBUG=APIServer:* npm start //å‘Šè¯‰æˆ‘ä»¬å¯åŠ¨æœåŠ¡å™¨</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd APIServer //è¿›å…¥é¡¹ç›®æ ¹ç›®å½•</span><br><span class="line">$ npm install  //å®‰è£…ä¾èµ–</span><br></pre></td></tr></table></figure></p>
<p>å›åˆ°é¡¹ç›®ä¸­ï¼Œä¼šçœ‹åˆ°ä¸€ä¸ªAPIServerç›®å½•</p>
<blockquote>
<p>bin: ç”¨æ¥å¯åŠ¨åº”ç”¨ï¼ˆæœåŠ¡å™¨ï¼‰<br>public: å­˜æ”¾é™æ€èµ„æºç›®å½•<br>outesï¼šè·¯ç”±ç”¨äºç¡®å®šåº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹çš„å®¢æˆ·æœºè¯·æ±‚ï¼ŒåŒ…å«ä¸€ä¸ª URIï¼ˆæˆ–è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚æ¯ä¸ªè·¯ç”±å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†ç¨‹åºå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œã€‚<br>views: æ¨¡æ¿æ–‡ä»¶æ‰€åœ¨ç›®å½• æ–‡ä»¶æ ¼å¼ä¸º.jade<br>ç›®å½•app.jsç¨‹åºmainæ–‡ä»¶ è¿™ä¸ªæ˜¯æœåŠ¡å™¨å¯åŠ¨çš„å…¥å£</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/11846892-5d35fab3915217e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h1 id="äºŒã€-å¯åŠ¨æœåŠ¡å™¨"><a href="#äºŒã€-å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="äºŒã€ å¯åŠ¨æœåŠ¡å™¨"></a>äºŒã€ å¯åŠ¨æœåŠ¡å™¨</h1><hr>
<p>é¦–å…ˆå¯åŠ¨æœåŠ¡å™¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm start</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/11846892-9bac37c86b235821.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="https://links.jianshu.com/go?to=http%3A%2F%2Flocalhost%3A3000%2F" target="_blank" rel="noopener">http://localhost:3000/</a></p>
<h2 id="ä¸‰ã€-åŸºæœ¬ä½¿ç”¨"><a href="#ä¸‰ã€-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="ä¸‰ã€ åŸºæœ¬ä½¿ç”¨"></a>ä¸‰ã€ åŸºæœ¬ä½¿ç”¨</h2><p>æ‰“å¼€<code>app.js</code> è¿™é‡Œä»‹ç»ä¸‹ä¸»è¦ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  var express = require(&apos;express&apos;);</span><br><span class="line">  var path = require(&apos;path&apos;);</span><br><span class="line">  var favicon = require(&apos;serve-favicon&apos;);</span><br><span class="line">  var logger = require(&apos;morgan&apos;);</span><br><span class="line">  var cookieParser = require(&apos;cookie-parser&apos;);</span><br><span class="line">  var bodyParser = require(&apos;body-parser&apos;);</span><br><span class="line"></span><br><span class="line">  var app = express();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">///=======è·¯ç”±ä¿¡æ¯ ï¼ˆæ¥å£åœ°å€ï¼‰å¼€å§‹ å­˜æ”¾åœ¨./routesç›®å½•ä¸‹===========//</span><br><span class="line">  var routes = require(&apos;./routes/index&apos;);//home pageæ¥å£</span><br><span class="line">  var users = require(&apos;./routes/users&apos;); //ç”¨æˆ·æ¥å£</span><br><span class="line"></span><br><span class="line">  app.use(&apos;/&apos;, routes); //åœ¨appä¸­æ³¨å†Œroutesè¯¥æ¥å£ </span><br><span class="line">  app.use(&apos;/users&apos;, users);//åœ¨appä¸­æ³¨å†Œusersæ¥å£</span><br><span class="line">///=======è·¯ç”±ä¿¡æ¯ ï¼ˆæ¥å£åœ°å€ ä»‹ç»===========//</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">///=======æ¨¡æ¿ å¼€å§‹===========//</span><br><span class="line">// view engine setup</span><br><span class="line">  app.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));</span><br><span class="line">  app.set(&apos;view engine&apos;, &apos;jade&apos;);</span><br><span class="line">///=======æ¨¡æ¿ ç»“æŸ===========//</span><br></pre></td></tr></table></figure></p>
<p>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­ è®¿é—® <a href="https://links.jianshu.com/go?to=http%3A%2F%2Flocalhost%3A3000%2F" target="_blank" rel="noopener">http://localhost:3000/</a> è°ƒç”¨çš„å°±æ˜¯indexä¸­çš„æ¥å£<br>æˆ‘ä»¬æ‰“å¼€index.jså°±å¯ä»¥çœ‹åˆ°è¯¥æ¥å£çš„å®šä¹‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var router = express.Router();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//å®šä¹‰ä¸€ä¸ªgetè¯·æ±‚ pathä¸ºæ ¹ç›®å½•</span><br><span class="line">/* GET home page. */</span><br><span class="line">router.get(&apos;/&apos;, function(req, res, next) &#123;</span><br><span class="line">    res.render(&apos;index&apos;, &#123; title: &apos;Express&apos; &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure></p>
<p>å®šä¹‰ä¸€ä¸ªè·¯ç”±çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.METHOD(PATH, HANDLER)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š</p>
<blockquote>
<p>app æ˜¯ express çš„å®ä¾‹ã€‚<br>METHODæ˜¯ <a href="https://links.jianshu.com/go?to=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHypertext_Transfer_Protocol" target="_blank" rel="noopener">HTTP è¯·æ±‚æ–¹æ³•</a>ã€‚<br>PATH æ˜¯æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ã€‚<br>HANDLER æ˜¯åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚<br>ä»¥ä¸Šçš„å®šä¹‰ä»£è¡¨<br>åœ¨æ ¹è·¯ç”± (/) ä¸Šï¼ˆåº”ç”¨ç¨‹åºçš„ä¸»é¡µï¼‰å¯¹ GET è¯·æ±‚è¿›è¡Œå“åº”ï¼š</p>
</blockquote>
<p>æ˜¯ä¸æ˜¯æ˜ç™½äº†ï¼Ÿ</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ªè·å–ç”¨æˆ·ä¿¡æ¯æ¥å£è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ<br>æ–°å»º<code>routes\user.js</code>æ–‡ä»¶<br>å®šä¹‰ä¸€ä¸ªUseræ¨¡å‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function User() &#123;</span><br><span class="line">      this.name;</span><br><span class="line">      this.city;</span><br><span class="line">      this.age;</span><br><span class="line">&#125;</span><br><span class="line">module.exports = User;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹<code>users.js</code>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;);</span><br><span class="line">var router = express.Router();</span><br><span class="line">var URL = require(&apos;url&apos;);  </span><br><span class="line">var User = require(&apos;./user&apos;);</span><br><span class="line"></span><br><span class="line">/* GET users listing. */</span><br><span class="line">router.get(&apos;/&apos;, function(req, res, next) &#123;</span><br><span class="line">  res.send(&apos;respond with a resource&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(&apos;/getUserInfo&apos;, function(req, res, next) &#123;</span><br><span class="line"></span><br><span class="line">  var user = new User();</span><br><span class="line">// è·å–urlå‚æ•° ä¾èµ–äºurlæ¨¡å— ä½¿ç”¨å‰éœ€è¦ä½¿ç”¨  require(&apos;url&apos;)</span><br><span class="line">  var params = URL.parse(req.url, true).query;</span><br><span class="line"></span><br><span class="line">if(params.id == &apos;1&apos;) &#123;</span><br><span class="line"></span><br><span class="line">  user.name = &quot;ligh&quot;;</span><br><span class="line">  user.age = &quot;1&quot;;</span><br><span class="line">  user.city = &quot;åŒ—äº¬å¸‚&quot;;</span><br><span class="line"></span><br><span class="line">&#125;else&#123;  </span><br><span class="line">  user.name = &quot;SPTING&quot;;</span><br><span class="line">  user.age = &quot;1&quot;;</span><br><span class="line">  user.city = &quot;æ­å·å¸‚&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var response = &#123;status:1,data:user&#125;;</span><br><span class="line">res.send(JSON.stringify(response));</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure></p>
<p>ç”±äºusers.jsè·¯ç”±ä¿¡æ¯å·²ç»åœ¨app.jsæ³¨å†Œ<br>åœæ­¢æœåŠ¡å™¨ é‡æ–°startæœåŠ¡å™¨å³å¯ç›´æ¥è®¿é—®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm start</span><br></pre></td></tr></table></figure></p>
<p>è°ƒç”¨æ–¹å¼<code>http://localhost:3000/users/getUserInfo?id=1</code><br><img src="https://upload-images.jianshu.io/upload_images/11846892-2fef11908aa7525f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>æ€»ç»“ï¼šå®Œç¾ï¼<br>ä½ å¯èƒ½éœ€è¦ï¼š<a href="https://www.jianshu.com/p/02085294b6ed" target="_blank" rel="noopener">NO2:Node JS + MySQL CRUD Workshop : Insert, Update, Select, Delete</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/Node1/" data-id="ckd4b4q14000qt2p38baa9bim" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Node" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/Node/" class="article-date">
  <time datetime="2020-07-27T09:12:00.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/Node/">NO3:Node.js + mysql+Sequelizeå®ç°æ³¨å†Œæ¥å£åŠæ ¡éªŒé€»è¾‘</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>åœ¨ä¸Šä¸€ç¯‡çš„åŸºç¡€ä¸Šï¼Œç»§ç»­å‡çº§!</p>
<p><a href="https://www.jianshu.com/p/02085294b6ed" target="_blank" rel="noopener">NO2:Node JS + MySQL CRUD Workshop : Insert, Update, Select, Delete</a></p>
<h1 id="1ã€å®‰è£…ä¾èµ–"><a href="#1ã€å®‰è£…ä¾èµ–" class="headerlink" title="1ã€å®‰è£…ä¾èµ–"></a>1ã€å®‰è£…ä¾èµ–</h1><ul>
<li><p>å®‰è£…<code>mysql2</code>+<code>sequelize</code> +  <code>jsonwebtoken</code> + <code>joi</code></p>
</li>
<li><p><code>sequelize</code><br><code>sequelize.js</code> æä¾›å¯¹ <a href="http://www.oschina.net/p/mysql" target="_blank" rel="noopener">MySQL</a>ï¼Œ<a href="http://www.oschina.net/p/mariadb" target="_blank" rel="noopener">MariaDB</a>ï¼Œ<a href="http://www.oschina.net/p/sqlite" target="_blank" rel="noopener">SQLite</a> å’Œ <a href="http://www.oschina.net/p/postgresql" target="_blank" rel="noopener">PostgreSQL</a> æ•°æ®åº“çš„ç®€å•è®¿é—®ï¼Œé€šè¿‡æ˜ å°„æ•°æ®åº“æ¡ç›®åˆ°å¯¹è±¡ï¼Œæˆ–è€…å¯¹è±¡åˆ°æ•°æ®åº“æ¡ç›®ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ ORMï¼ˆObject-Relational-Mapperï¼‰ã€‚Sequelize.js å®Œå…¨æ˜¯ä½¿ç”¨ JavaScript ç¼–å†™ï¼Œé€‚ç”¨äº Node.js çš„ç¯å¢ƒã€‚<br>å‚è€ƒé“¾æ¥ï¼š</p>
</li>
<li><a href="https://www.liaoxuefeng.com/wiki/1022910821149312/1101571555324224" target="_blank" rel="noopener">ä½¿ç”¨Sequelize</a></li>
<li><a href="https://sequelize.org/" target="_blank" rel="noopener">sequelize</a></li>
<li><a href="https://github.com/caiya/node-sequelize/tree/master/bin" target="_blank" rel="noopener">https://github.com/caiya/node-sequelize/tree/master/bin</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save sequelize mysql2 joi jsonwebtoken</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="2ã€æ·»åŠ -ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#2ã€æ·»åŠ -ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€æ·»åŠ +ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>2ã€æ·»åŠ +ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><p><code>ä¿®æ”¹app.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// app.js</span><br><span class="line">var indexRouter = require(&apos;./routes/index&apos;);</span><br><span class="line">// var usersRouter = require(&apos;./routes/users&apos;);</span><br><span class="line"></span><br><span class="line">app.use(&apos;/&apos;, indexRouter);</span><br><span class="line">// app.use(&apos;/users&apos;, usersRouter);</span><br></pre></td></tr></table></figure></p>
<p><code>ä¿®æ”¹bin/www</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const &#123;sequelize&#125; = require(&apos;../models&apos;)</span><br><span class="line">sequelize.sync(&#123;force: false&#125;)</span><br><span class="line">  .then(() =&gt; &#123;</span><br><span class="line">    server.listen(port);</span><br><span class="line">    console.log(`Server started on port $&#123;config.port&#125;`)</span><br><span class="line">  &#125;).catch(function (err) &#123;</span><br><span class="line">    console.log(&apos;failed: &apos; + err);</span><br><span class="line">&#125;);</span><br><span class="line">// server.listen(port);</span><br></pre></td></tr></table></figure></p>
<p><code>æ–°å»ºmodels/index.js + models/user.js</code>:é…ç½®å„ç§æ•°æ®åº“æ¨¡å‹ç±»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//models/index.js</span><br><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line">const path = require(&apos;path&apos;)</span><br><span class="line">const Sequelize = require(&apos;sequelize&apos;)</span><br><span class="line">const config = require(&apos;../config/config&apos;)</span><br><span class="line">const db = &#123;&#125;</span><br><span class="line"></span><br><span class="line">const sequelize = new Sequelize(config.database, config.username, config.password, &#123;</span><br><span class="line">  host: config.host,</span><br><span class="line">  dialect: &apos;mysql&apos;,</span><br><span class="line">  pool: &#123;</span><br><span class="line">      max: 5,</span><br><span class="line">      min: 0,</span><br><span class="line">      idle: 30000</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs</span><br><span class="line">  .readdirSync(__dirname)</span><br><span class="line">  .filter((file) =&gt;</span><br><span class="line">    file !== &apos;index.js&apos;</span><br><span class="line">  )</span><br><span class="line">  .forEach((file) =&gt; &#123;</span><br><span class="line">    const model = sequelize.import(path.join(__dirname, file))</span><br><span class="line">    db[model.name] = model</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">Object.keys(db).forEach(function (modelName) &#123;</span><br><span class="line">  if (&apos;associate&apos; in db[modelName]) &#123;</span><br><span class="line">    db[modelName].associate(db)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">db.sequelize = sequelize</span><br><span class="line">db.Sequelize = Sequelize</span><br><span class="line"></span><br><span class="line">module.exports = db</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">//models/user.js</span><br><span class="line">const Promise = require(&apos;bluebird&apos;)</span><br><span class="line">const bcrypt = Promise.promisifyAll(require(&apos;bcrypt&apos;))</span><br><span class="line"></span><br><span class="line">// function hashPassword (user, options) &#123;</span><br><span class="line">//   const SALT_FACTOR = 8</span><br><span class="line"></span><br><span class="line">//   if (!user.changed(&apos;password&apos;)) &#123;</span><br><span class="line">//     return</span><br><span class="line">//   &#125;</span><br><span class="line"></span><br><span class="line">//   return bcrypt</span><br><span class="line">//     .genSaltAsync(SALT_FACTOR)</span><br><span class="line">//     .then(salt =&gt; bcrypt.hashAsync(user.password, salt, null))</span><br><span class="line">//     .then(hash =&gt; &#123;</span><br><span class="line">//       user.setDataValue(&apos;password&apos;, hash)</span><br><span class="line">//     &#125;)</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">module.exports = (sequelize, DataTypes) =&gt; &#123;</span><br><span class="line">  const User = sequelize.define(&apos;User&apos;, &#123;</span><br><span class="line">    email: &#123;</span><br><span class="line">      type: DataTypes.STRING,</span><br><span class="line">      unique: true</span><br><span class="line">    &#125;,</span><br><span class="line">    password: DataTypes.STRING</span><br><span class="line">  &#125;, </span><br><span class="line">// &#123;</span><br><span class="line">//     hooks: &#123;</span><br><span class="line">//       beforeCreate: hashPassword,</span><br><span class="line">//       beforeUpdate: hashPassword,</span><br><span class="line">//       beforeSave: hashPassword</span><br><span class="line">//     &#125;</span><br><span class="line">//   &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">  User.prototype.comparePassword = function (password) &#123;</span><br><span class="line">    return bcrypt.compareAsync(password, this.password)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  User.associate = function (models) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return User</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>æ–°å»ºconfig/config.js</code>:æ•°æ®åº“ç›¸å…³é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var config = &#123;</span><br><span class="line">  host     : &apos;localhost&apos;, // ä¸»æœºå</span><br><span class="line">  username : &apos;root&apos;, // ç”¨æˆ·å</span><br><span class="line">  password : &apos;1234567w&apos;, // å£ä»¤</span><br><span class="line">  database : &apos;nodemysql&apos;, // ä½¿ç”¨å“ªä¸ªæ•°æ®åº“</span><br><span class="line">  port: 3000, // ç«¯å£å·ï¼ŒMySQLé»˜è®¤3306</span><br><span class="line">  authentication: &#123;</span><br><span class="line">    jwtSecret: process.env.JWT_SECRET || &apos;secret&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">module.exports = config;</span><br></pre></td></tr></table></figure>
<p><code>ä¿®æ”¹router/index.js</code>:æ·»åŠ æ³¨å†Œæ¥å£<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// // index.js</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const router = express.Router();</span><br><span class="line">const AuthenticationControllerPolicy = require(&apos;../policies/AuthenticationControllerPolicy&apos;)</span><br><span class="line">const AuthenticationController = require(&apos;../controllers/AuthenticationController&apos;)</span><br><span class="line"></span><br><span class="line">router.post(&apos;/register&apos;,</span><br><span class="line">    AuthenticationControllerPolicy.register,</span><br><span class="line">    AuthenticationController.register)</span><br><span class="line">/* GET home page. */</span><br><span class="line">router.post(&apos;/&apos;, function(req, res, next) &#123;</span><br><span class="line">  res.render(&apos;index&apos;, &#123; title: &apos;Express&apos; &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure></p>
<p><code>æ–°å»ºpolicies/AuthenticationControllerPolicy.js</code>:ç”¨äºæ ¡éªŒæ³¨å†Œé€»è¾‘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">const Joi = require(&apos;joi&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  register (req, res, next) &#123;</span><br><span class="line">    const schema = &#123;</span><br><span class="line">      email: Joi.string().email(),</span><br><span class="line">      password: Joi.string().regex(</span><br><span class="line">        new RegExp(&apos;^[a-zA-Z0-9]&#123;8,32&#125;$&apos;)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    const &#123;error&#125; = Joi.validate(req.body, schema)</span><br><span class="line">    if (error) &#123;</span><br><span class="line">      switch (error.details[0].context.key) &#123;</span><br><span class="line">        case &apos;email&apos;:</span><br><span class="line">          res.status(400).send(&#123;</span><br><span class="line">            error: &apos;You must provide a valid email address&apos;</span><br><span class="line">          &#125;)</span><br><span class="line">          break</span><br><span class="line">        case &apos;password&apos;:</span><br><span class="line">          res.status(400).send(&#123;</span><br><span class="line">            error: `The password provided failed to match the following rules:</span><br><span class="line">              &lt;br&gt;</span><br><span class="line">              1. It must contain ONLY the following characters: lower case, upper case, numerics.</span><br><span class="line">              &lt;br&gt;</span><br><span class="line">              2. It must be at least 8 characters in length and not greater than 32 characters in length.</span><br><span class="line">            `</span><br><span class="line">          &#125;)</span><br><span class="line">          break</span><br><span class="line">        default:</span><br><span class="line">          res.status(400).send(&#123;</span><br><span class="line">            error: &apos;Invalid registration information&apos;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>æ–°å»ºcontrollers/AuthenticationController.js</code>:ç”¨äºåœ¨æ•°æ®åº“è¡¨ä¸­åˆ›å»ºæ³¨å†Œæ•°æ®é€»è¾‘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const &#123;User&#125; = require(&apos;../models&apos;)</span><br><span class="line">const jwt = require(&apos;jsonwebtoken&apos;)</span><br><span class="line">const config = require(&apos;../config/config&apos;)</span><br><span class="line"></span><br><span class="line">function jwtSignUser (user) &#123;</span><br><span class="line">  const ONE_WEEK = 60 * 60 * 24 * 7</span><br><span class="line">  return jwt.sign(user, config.authentication.jwtSecret, &#123;</span><br><span class="line">    expiresIn: ONE_WEEK</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  async register (req, res) &#123;</span><br><span class="line">    console.log(14, req.body)</span><br><span class="line">    try &#123;</span><br><span class="line">      const user = await User.create(req.body)</span><br><span class="line">      console.log(user)</span><br><span class="line">      const userJson = user.toJSON()</span><br><span class="line">      res.send(&#123;</span><br><span class="line">        user: userJson,</span><br><span class="line">        token: jwtSignUser(userJson)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">      res.status(400).send(&#123;</span><br><span class="line">        error: &apos;This email account is already in use.&apos;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>###3. æ¥å£æµ‹è¯•</p>
<blockquote>
<p>æ­¤å¤„æ¨èä¸€æ¬¾æ¥å£æµ‹è¯•å·¥å…·ï¼<code>POSTMAN</code>ï¼ ç®€å•æ¥è¯´ï¼Œå››ä¸ªè¯ï¼Œç®€å•å®ç”¨å¤§æ–¹ç¾è§‚ï¼</p>
</blockquote>
<ul>
<li>æ‰“å¼€<code>postman</code><br>ç”¨postæ–¹æ³•è¯·æ±‚æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢å¯ä»¥æˆåŠŸçš„è¿”å›message<br><img src="https://upload-images.jianshu.io/upload_images/11846892-c7be54c38a8b1669.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></li>
</ul>
<p>æŒ‰ç…§ç›¸å…³æç¤ºè¿›è¡Œ æ³¨å†Œæ•°æ®ï¼Œå³å¯</p>
<p><code>æ‰“å¼€æ•°æ®åº“å¯è§†åŒ–å·¥å…·ï¼š</code><br>å¯ä»¥çœ‹åˆ°åœ¨tableè¡¨ä¸­æœ‰ä¸€ä¸ªåä¸ºuserçš„æ•°æ®è¡¨,åœ¨userè¡¨ä¸­å¯ä»¥çœ‹åˆ°æ•°æ®åˆ›å»ºæˆåŠŸ:<br><img src="https://upload-images.jianshu.io/upload_images/11846892-bb8daab7b371cb5d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>æˆ‘ä»¬çš„æ³¨å†Œæ¥å£å°±æˆåŠŸå•¦ï¼</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/Node/" data-id="ckd4b4q10000ot2p3vmpiq26q" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/27/Mysql/" class="article-date">
  <time datetime="2020-07-27T09:11:18.000Z" itemprop="datePublished">2020-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/27/Mysql/">macOS ä¸Šå®‰è£ MySQL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>åœ¨ macOS ä¸‹å®‰è£ MySQL èµ„æ–™åº“ï¼Œå¹¶ä¸”åŸºæœ¬çš„è®¾å®š root å¯†ç ã€‚</p>
</blockquote>
<h2 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h2><ul>
<li><a href="https://dev.mysql.com/downloads/file/?id=454017" target="_blank" rel="noopener">å®˜ç½‘é¡µé¢</a>ä¸‹æ–¹<code>No thanks, just start my download.</code></li>
<li>å€Ÿç”¨ç«™ç‚¹-<a href="https://cdn.ioa.tw/MacEnvInit/mysql-5.6.21-osx10.9-x86_64.dmg" target="_blank" rel="noopener">mysql-5.6.21-osx10.9-x86_64.dmg</a></li>
<li>å¯¹<code>mysql-5.6.21-osx10.9-x86_64.dmg</code>ç‚¹å‡»ä¸¤ä¸‹è¿›è¡Œå®‰è£…ï¼Œç‚¹å‡»ä¸¤ä¸‹<code>mysql-5.6.21-osx10.8-x86_64.pkg</code> å¼€å§‹å®‰è£…</li>
<li>â€¼ï¸è‹¥æ˜¯ OSX 10.10 ä»¥ä¸Šï¼Œè¯·åœ¨ å®‰è£…ç±»å‹ çš„æ­¥éª¤æ—¶ç‚¹å‡»è‡ªå®š æŠŠ <code>Startup Item</code> é€‰æ‹© å–æ¶ˆå‹¾é€‰ï¼</li>
<li>å®‰è£…å®Œæˆåï¼Œæ‰“å¼€ ç³»ç»Ÿåå¥½è®¾ç½® &gt; MySQL &gt; Start MySQL Server<br>è‹¥ ç³»ç»Ÿåå¥½è®¾ç½® é‡Œé¢æ²¡çœ‹åˆ° MySQL çš„è¯ï¼Œè¯·é‡å¼€ ç³»ç»Ÿåå¥½è®¾ç½®<h2 id="å˜æ›´å¯åŠ¨æƒé™"><a href="#å˜æ›´å¯åŠ¨æƒé™" class="headerlink" title="å˜æ›´å¯åŠ¨æƒé™"></a>å˜æ›´å¯åŠ¨æƒé™</h2></li>
<li>æ¯æ¬¡å¯åŠ¨ MySQL éƒ½è¦è¾“å…¥å¯†ç ï¼Œå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å˜æ›´ä¸€ä¸‹æƒé™ï¼Œç»ˆç«¯è¾“å…¥å‘½ä»¤ <code>sudo chmod 777 /usr/local/mysql/support-files/mysql.server</code><h2 id="åŠ å…¥æŒ‡ä»¤"><a href="#åŠ å…¥æŒ‡ä»¤" class="headerlink" title="åŠ å…¥æŒ‡ä»¤"></a>åŠ å…¥æŒ‡ä»¤</h2></li>
<li>æ‰“å¼€ç»ˆç«¯è¾“å…¥ <code>vim ~/.zshrc</code></li>
<li>åœ¨æœ€ä¸‹é¢æ–°å¢ <code>export PATH=&quot;/usr/local/mysql/bin:$PATH&quot;</code>æ‰§è¡Œ<code>:wq</code></li>
<li>é€€å‡ºä¹‹åï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œ<code>source ~/.zshrc</code><h2 id="è®¾å®šå¯†ç "><a href="#è®¾å®šå¯†ç " class="headerlink" title="è®¾å®šå¯†ç "></a>è®¾å®šå¯†ç </h2></li>
<li>æ‰“å¼€ç»ˆç«¯</li>
<li>è¿›å…¥ MySQLï¼Œç»ˆç«¯æ‰§è¡Œå‘½ä»¤ <code>mysql -u root</code></li>
<li>æ‰§è¡Œå‘½ä»¤<code>use mysql;</code>é€‰æ‹©èµ„æ–™åº“</li>
<li>æ‰§è¡Œå‘½ä»¤<code>update user set password=PASSWORD(&quot;ä½ çš„å¯†ç¢¼&quot;) where User=&#39;root&#39;;</code> è®¾å®šå¯†ç </li>
<li>æ‰§è¡Œå‘½ä»¤<code>flush privileges;</code>åˆ·æ–°MySQL</li>
<li>æ‰§è¡Œå‘½ä»¤<code>quit</code> ç¦»å¼€ MySQL</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼è®¾ç½®å¯†ç æ—¶ï¼Œè¦è®°å¾—åŠ ä¸Šå¼•å·ï¼Œå‡è®¾å¯†ç ä¸º1234ï¼Œåº”è¯¥ä¸ºï¼š<br>update user set password=PASSWORD(â€œ1234â€) where User=â€™rootâ€™;</p>
</blockquote>
<p>ç›¸å…³å‚è€ƒï¼š<a href="https://www.ioa.tw/macOS/MySQL.html" target="_blank" rel="noopener">https://www.ioa.tw/macOS/MySQL.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/27/Mysql/" data-id="ckd4b4q11000pt2p36iinj26l" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-npmReactBuild" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/08/npmReactBuild/" class="article-date">
  <time datetime="2020-06-08T13:12:16.000Z" itemprop="datePublished">2020-06-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/08/npmReactBuild/">ä½¿ç”¨reactæ­å»ºç»„ä»¶åº“ï¼šreact+typescript+storybook</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Author: Echo<br>Time: 2020-06-08 21:12:16</p>
<h2 id="1-å®‰è£…ç»„ä»¶åº“"><a href="#1-å®‰è£…ç»„ä»¶åº“" class="headerlink" title="1. å®‰è£…ç»„ä»¶åº“"></a>1. å®‰è£…ç»„ä»¶åº“</h2><p>æ‰§è¡Œå®‰è£…å‘½ä»¤<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx create-react-app echo-rui  --typescript</span><br></pre></td></tr></table></figure></p>
<h2 id="2-ç»„ä»¶åº“é…ç½®eslint"><a href="#2-ç»„ä»¶åº“é…ç½®eslint" class="headerlink" title="2. ç»„ä»¶åº“é…ç½®eslint"></a>2. ç»„ä»¶åº“é…ç½®eslint</h2><ul>
<li>é…ç½®ESlint<br>æ–°å»º<code>.eslintrc.json</code>æ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;extends&quot;: &quot;react-app&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ–°å»º <code>.vscode/settings.json</code>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;eslint.validate&quot;: [</span><br><span class="line">    &quot;javascript&quot;,</span><br><span class="line">    &quot;javascriptreact&quot;,</span><br><span class="line">    &#123; &quot;language&quot;: &quot;typescript&quot;, &quot;autoFix&quot;: true &#125;,</span><br><span class="line">    &#123; &quot;language&quot;: &quot;typescriptreact&quot;, &quot;autoFix&quot;: true &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="3-å¼•å…¥ä¾èµ–"><a href="#3-å¼•å…¥ä¾èµ–" class="headerlink" title="3. å¼•å…¥ä¾èµ–"></a>3. å¼•å…¥ä¾èµ–</h2><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <code>classname</code>ï¼š<a href="https://github.com/jedWatson/classnames" target="_blank" rel="noopener">https://github.com/jedWatson/classnames</a><br>æ‰§è¡Œå®‰è£…å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install classnames -D</span><br><span class="line">$ npm install @types/classnames -D</span><br><span class="line">$ npm install node-sass -D</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š<br>å¦‚æœå¯¹è±¡çš„keyå€¼æ˜¯å˜åŒ–çš„ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„ä¸­æ‹¬å·çš„å½¢å¼ï¼š[<code>btn-${btnType}</code>]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// btn, btn-lg, btn-primary</span><br><span class="line">const classes = classNames(&apos;btn&apos;, className, &#123;</span><br><span class="line">   [`btn-$&#123;btnType&#125;`]: btnType,</span><br><span class="line">   [`btn-$&#123;size&#125;`]: size,</span><br><span class="line">   &apos;disabled&apos;: (btnType === &apos;link&apos;) &amp;&amp; disabled</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="4-ç¼–å†™ç»„ä»¶"><a href="#4-ç¼–å†™ç»„ä»¶" class="headerlink" title="4. ç¼–å†™ç»„ä»¶"></a>4. ç¼–å†™ç»„ä»¶</h2><ul>
<li>æ–°å»º <code>src/components/Button/button.tsx</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">import React,&#123;FC,ButtonHTMLAttributes,AnchorHTMLAttributes&#125; from &quot;react&quot;;</span><br><span class="line">import classnames from &quot;classnames&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// æŒ‰é’®å¤§å°</span><br><span class="line">export type ButtonSize = &quot;lg&quot; | &quot;sm&quot;;</span><br><span class="line"></span><br><span class="line">export type ButtonType = &quot;primary&quot; | &quot;default&quot; | &quot;danger&quot; | &quot;link&quot;;</span><br><span class="line"></span><br><span class="line">interface BaseButtonProps &#123;</span><br><span class="line">  /** è‡ªå®šä¹‰ç±»å */</span><br><span class="line">  className?: string;</span><br><span class="line">  /** è®¾ç½®Button çš„ç¦ç”¨ */</span><br><span class="line">  disabled?: boolean;</span><br><span class="line">  /** è®¾ç½®Button çš„å¤§å° */</span><br><span class="line">  size?: ButtonSize;</span><br><span class="line">  /** è®¾ç½®Button çš„ç±»å‹ */</span><br><span class="line">  btnType?: ButtonType;</span><br><span class="line">  children: React.ReactNode;</span><br><span class="line">  /** å½“btnTypeä¸ºlinkæ—¶ï¼Œå¿…å¡« */</span><br><span class="line">  href?: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¹¶é›†</span><br><span class="line">type NativeButtonProps = BaseButtonProps &amp;</span><br><span class="line">  ButtonHTMLAttributes&lt;HTMLElement&gt;;</span><br><span class="line">type AnchorButtonProps = BaseButtonProps &amp;</span><br><span class="line">  AnchorHTMLAttributes&lt;HTMLElement&gt;;</span><br><span class="line"></span><br><span class="line">// Partialï¼štypescriptå…¨å±€å‡½æ•°ï¼Œå°†å±æ€§å…¨éƒ¨å˜æˆå¯é€‰çš„</span><br><span class="line">export type ButtonProps = Partial&lt;NativeButtonProps &amp; AnchorButtonProps&gt;;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨react-docgen-typescript-loaderçš„bugï¼Œåªèƒ½ä½¿ç”¨FCï¼Œä¸èƒ½React.FC</span><br><span class="line">export const Button: FC&lt;ButtonProps&gt; = (props) =&gt; &#123;</span><br><span class="line">  const &#123;</span><br><span class="line">    disabled,</span><br><span class="line">    size,</span><br><span class="line">    btnType,</span><br><span class="line">    children,</span><br><span class="line">    href,</span><br><span class="line">    className,</span><br><span class="line">    ...resetProps</span><br><span class="line">  &#125; = props;</span><br><span class="line"></span><br><span class="line">  const classes = classnames(&quot;echo-btn&quot;, className, &#123;</span><br><span class="line">    [`echo-btn-$&#123;btnType&#125;`]: btnType,</span><br><span class="line">    [`echo-btn-$&#123;size&#125;`]: size,</span><br><span class="line">    &quot;echo-button-disabled&quot;: btnType === &quot;link&quot; &amp;&amp; disabled,</span><br><span class="line">  &#125;);</span><br><span class="line">  if (btnType === &quot;link&quot; &amp;&amp; href) &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;a href=&#123;href&#125; className=&#123;classes&#125; &#123;...resetProps&#125;&gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;button className=&#123;classes&#125; disabled=&#123;disabled&#125; &#123;...resetProps&#125;&gt;</span><br><span class="line">        &#123;children&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Button.defaultProps = &#123;</span><br><span class="line">  disabled: false,</span><br><span class="line">  btnType: &quot;default&quot;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default Button;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æ–°å»º <code>src/components/Button/index.tsx</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import Button from &quot;./button&quot;;</span><br><span class="line"></span><br><span class="line">export default Button;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º <code>src/components/Button/_style.scss</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;../../styles/variables/button&quot;;</span><br><span class="line">@import &quot;../../styles/mixin/button&quot;;</span><br><span class="line">.echo-btn &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-weight: $btn-font-weight;</span><br><span class="line">  line-height: $btn-line-height;</span><br><span class="line">  color: $body-color;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  text-align: center;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">  background-image: none;</span><br><span class="line">  border: $btn-border-width solid transparent;</span><br><span class="line">  @include button-size(</span><br><span class="line">    $btn-padding-y,</span><br><span class="line">    $btn-padding-x,</span><br><span class="line">    $btn-font-size,</span><br><span class="line">    $btn-border-radius</span><br><span class="line">  );</span><br><span class="line">  box-shadow: $btn-box-shadow;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  transition: $btn-transition;</span><br><span class="line">  &amp;.echo-button-disabled</span><br><span class="line">  &amp;[disabled] &#123;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">    opacity: $btn-disabled-opacity;</span><br><span class="line">    box-shadow: none;</span><br><span class="line">    &gt; * &#123;</span><br><span class="line">      pointer-events: none;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.echo-btn-lg &#123;</span><br><span class="line">  @include button-size(</span><br><span class="line">    $btn-padding-y-lg,</span><br><span class="line">    $btn-padding-x-lg,</span><br><span class="line">    $btn-font-size-lg,</span><br><span class="line">    $btn-border-radius-lg</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.echo-btn-sm &#123;</span><br><span class="line">  @include button-size(</span><br><span class="line">    $btn-padding-y-sm,</span><br><span class="line">    $btn-padding-x-sm,</span><br><span class="line">    $btn-font-size-sm,</span><br><span class="line">    $btn-border-radius-sm</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.echo-btn-primary &#123;</span><br><span class="line">  @include button-style($primary, $primary, $white);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.echo-btn-danger &#123;</span><br><span class="line">  @include button-style($danger, $danger, $white);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.echo-btn-default &#123;</span><br><span class="line">  @include button-style(</span><br><span class="line">    $white,</span><br><span class="line">    $gray-400,</span><br><span class="line">    $body-color,</span><br><span class="line">    $white,</span><br><span class="line">    $primary,</span><br><span class="line">    $primary</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.echo-btn-link &#123;</span><br><span class="line">  font-weight: $font-weight-normal;</span><br><span class="line">  color: $btn-link-color;</span><br><span class="line">  text-decoration: $link-decoration;</span><br><span class="line">  box-shadow: none;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    color: $btn-link-hover-color;</span><br><span class="line">    text-decoration: $link-hover-decoration;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;:focus &#123;</span><br><span class="line">    text-decoration: $link-hover-decoration;</span><br><span class="line">    box-shadow: none;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;:disabled,</span><br><span class="line">  &amp;.echo-button-disabled &#123;</span><br><span class="line">    color: $btn-link-disabled-color;</span><br><span class="line">    pointer-events: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º <code>styles/variables/button.scss</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;./common&quot;;</span><br><span class="line">// æŒ‰é’®åŸºæœ¬å±æ€§</span><br><span class="line">$btn-font-weight: 400;</span><br><span class="line">$btn-padding-y: 0.375rem !default;</span><br><span class="line">$btn-padding-x: 0.75rem !default;</span><br><span class="line">$btn-font-family: $font-family-base !default;</span><br><span class="line">$btn-font-size: $font-size-base !default;</span><br><span class="line">$btn-line-height: $line-height-base !default;</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º styles/mixin/button.scss`æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@mixin button-size($padding-y, $padding-x, $font-size, $border-raduis) &#123;</span><br><span class="line">  padding: $padding-y $padding-x;</span><br><span class="line">  font-size: $font-size;</span><br><span class="line">  border-radius: $border-raduis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@mixin button-style(</span><br><span class="line">  $background,</span><br><span class="line">  $border,</span><br><span class="line">  $color,</span><br><span class="line">  // lghten,sasså†…ç½®å‡½æ•°ï¼Œæ¯”$backgroundé¢œè‰²è¦æµ…ä¸Š7.5%</span><br><span class="line">    $hover-background: lighten($background, 7.5%),</span><br><span class="line">  $hover-border: lighten($border, 10%),</span><br><span class="line">  $hover-color: $color</span><br><span class="line">) </span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ <code>src/styles/index.scss</code>æ–‡ä»¶ä¸­å¼•å…¥ç»„ä»¶æ ·å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// indexæ–‡ä»¶ä¸»è¦æ˜¯å¼•å…¥æ‰€æœ‰ç»„ä»¶çš„æ ·å¼ã€‚</span><br><span class="line">// ä¸éœ€è¦å†™_ï¼Œè¿™æ˜¯sassçš„ä¸€ç§å†™æ³•ï¼Œå‘Šè¯‰sassè¿™äº›æ ·å¼ä¸æ‰“åŒ…åˆ°cssä¸­ï¼Œåªèƒ½åšå¯¼å…¥ï¼Œä¹Ÿæ˜¯ä¸€ç§æ¨¡å—åŒ–</span><br><span class="line"></span><br><span class="line">// æŒ‰é’®æ ·å¼</span><br><span class="line">@import &quot;../components/Button/style&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º <code>src/styles/index.scss</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// indexæ–‡ä»¶ä¸»è¦æ˜¯å¼•å…¥æ‰€æœ‰ç»„ä»¶çš„æ ·å¼ã€‚</span><br><span class="line">// ä¸éœ€è¦å†™_ï¼Œè¿™æ˜¯sassçš„ä¸€ç§å†™æ³•ï¼Œå‘Šè¯‰sassè¿™äº›æ ·å¼ä¸æ‰“åŒ…åˆ°cssä¸­ï¼Œåªèƒ½åšå¯¼å…¥ï¼Œä¹Ÿæ˜¯ä¸€ç§æ¨¡å—åŒ–</span><br><span class="line"></span><br><span class="line">// æŒ‰é’®æ ·å¼</span><br><span class="line">@import &quot;../components/Button/style&quot;;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-åˆ é™¤å¤šä½™æ–‡ä»¶-å¼•ç”¨ç»„ä»¶"><a href="#5-åˆ é™¤å¤šä½™æ–‡ä»¶-å¼•ç”¨ç»„ä»¶" class="headerlink" title="5. åˆ é™¤å¤šä½™æ–‡ä»¶+å¼•ç”¨ç»„ä»¶"></a>5. åˆ é™¤å¤šä½™æ–‡ä»¶+å¼•ç”¨ç»„ä»¶</h2><ul>
<li>åˆ é™¤<code>src/App.css</code> + <code>src/logo.svg</code> + <code>src/index.css</code> + <code>src/App.test.js</code> + <code>serviceWorker.ts</code>æ–‡ä»¶</li>
<li><p>ä¿®æ”¹<code>App.tsx</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &quot;./styles/index.scss&quot;;</span><br><span class="line">import Button, &#123; ButtonType, ButtonSize &#125; from &quot;./components/Button/button&quot;;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;Button&gt;hello&lt;/Button&gt;</span><br><span class="line">      &lt;Button disabled&gt;hello&lt;/Button&gt;</span><br><span class="line">      &lt;Button btnType=&quot;primary&quot; size=&quot;sm&quot;&gt;</span><br><span class="line">        hello</span><br><span class="line">      &lt;/Button&gt;</span><br><span class="line">      &lt;Button</span><br><span class="line">        btnType=&quot;danger&quot;</span><br><span class="line">        size=&quot;lg&quot;</span><br><span class="line">        onClick=&#123;() =&gt; &#123;</span><br><span class="line">          alert(111);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        hello</span><br><span class="line">      &lt;/Button&gt;</span><br><span class="line">     &lt;Button</span><br><span class="line">        btnType=&quot;link&quot;</span><br><span class="line">        href=&quot;http://www.baidu.com&quot;</span><br><span class="line">        target=&quot;_blank&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        hello</span><br><span class="line">      &lt;/Button&gt;</span><br><span class="line">      &lt;Button disabled btnType=&quot;link&quot; href=&quot;http://www.baidu.com&quot;&gt;</span><br><span class="line">        hello</span><br><span class="line">      &lt;/Button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹<code>src/index.tsx</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export &#123; default as Button &#125; from &quot;./components/Button&quot;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-è¿è¡Œé¡¹ç›®"><a href="#6-è¿è¡Œé¡¹ç›®" class="headerlink" title="6. è¿è¡Œé¡¹ç›®"></a>6. è¿è¡Œé¡¹ç›®</h2><p>æ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm start</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®é¡¹ç›® å¯ä»¥çœ‹åˆ°buttonç»„ä»¶æˆåŠŸäº†ï¼<br><img src="https://upload-images.jianshu.io/upload_images/11846892-8690603021ebd620.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>##7.å•å…ƒæµ‹è¯•<br>æ–°å»º<code>src/Button/button.test.tsx</code>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &#123; render, fireEvent &#125; from &quot;@testing-library/react&quot;;</span><br><span class="line">import Button, &#123; ButtonProps &#125; from &quot;./button&quot;;</span><br><span class="line"></span><br><span class="line">describe(&quot;Button ç»„ä»¶&quot;, () =&gt; &#123;</span><br><span class="line">  it(&apos;é»˜è®¤Button&apos;, () =&gt; &#123;</span><br><span class="line">    const testProps: ButtonProps = &#123;</span><br><span class="line">      onClick: jest.fn(),</span><br><span class="line">    &#125;</span><br><span class="line">    const wrapper = render(&lt;Button &#123;...testProps&#125;&gt;hello&lt;/Button&gt;);</span><br><span class="line">    const element = wrapper.getByText(&apos;hello&apos;)as HTMLButtonElement;</span><br><span class="line">    // å…ƒç´ æ˜¯å¦è¢«æ¸²æŸ“åœ¨æ–‡æ¡£ä¸­</span><br><span class="line">    expect(element).toBeInTheDocument();</span><br><span class="line">    // åˆ¤æ–­æ ‡ç­¾å</span><br><span class="line">    expect(element.tagName).toEqual(&quot;BUTTON&quot;);</span><br><span class="line">     // åˆ¤æ–­æ˜¯å¦æœ‰ç±»å</span><br><span class="line">     expect(element).toHaveClass(&quot;echo-btn-default&quot;);</span><br><span class="line">     expect(element).not.toHaveClass(&quot;echo-disabled&quot;);</span><br><span class="line">     //   è§¦å‘ç‚¹å‡»äº‹ä»¶</span><br><span class="line">    fireEvent.click(element);</span><br><span class="line">    expect(testProps.onClick).toHaveBeenCalled();</span><br><span class="line">    expect(element.disabled).toBeFalsy();</span><br><span class="line">  &#125;)</span><br><span class="line">  it(&quot;æµ‹è¯•ä¼ å…¥ä¸åŒå±æ€§çš„æƒ…å†µ&quot;, () =&gt; &#123;</span><br><span class="line">    const testProps: ButtonProps = &#123;</span><br><span class="line">      btnType: &quot;primary&quot;,</span><br><span class="line">      size: &quot;lg&quot;,</span><br><span class="line">      className: &quot;test-name&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">    const wrapper = render(&lt;Button &#123;...testProps&#125;&gt;hello&lt;/Button&gt;);</span><br><span class="line">    const element = wrapper.getByText(&quot;hello&quot;) as HTMLButtonElement;</span><br><span class="line">    expect(element).toBeInTheDocument();</span><br><span class="line">    expect(element).toHaveClass(&quot;echo-btn-primary&quot;);</span><br><span class="line">    expect(element).toHaveClass(&quot;echo-btn-lg&quot;);</span><br><span class="line">    expect(element).toHaveClass(&quot;test-name&quot;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  it(&quot;æµ‹è¯•å½“btnTypeä¸ºlinkå’Œhrefå­˜åœ¨çš„æƒ…å†µ&quot;, () =&gt; &#123;</span><br><span class="line">    const testProps: ButtonProps = &#123;</span><br><span class="line">      btnType: &quot;link&quot;,</span><br><span class="line">      href: &quot;http://www.baidu.com&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">    const wrapper = render(&lt;Button &#123;...testProps&#125;&gt;Link&lt;/Button&gt;);</span><br><span class="line">    const element = wrapper.getByText(&quot;Link&quot;) as HTMLAnchorElement;</span><br><span class="line">    expect(element).toBeInTheDocument();</span><br><span class="line">    expect(element.tagName).toEqual(&quot;A&quot;);</span><br><span class="line">    expect(element).toHaveClass(&quot;echo-btn-link&quot;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  it(&quot;æµ‹è¯•ç¦ç”¨çš„æƒ…å†µ&quot;, () =&gt; &#123;</span><br><span class="line">    const testProps: ButtonProps = &#123;</span><br><span class="line">      onClick: jest.fn(),</span><br><span class="line">      disabled: true,</span><br><span class="line">    &#125;;</span><br><span class="line">    const wrapper = render(&lt;Button &#123;...testProps&#125;&gt;Disabled&lt;/Button&gt;);</span><br><span class="line">    const element = wrapper.getByText(&quot;Disabled&quot;) as HTMLButtonElement;</span><br><span class="line">    expect(element).toBeInTheDocument();</span><br><span class="line">    expect(element.disabled).toBeTruthy();</span><br><span class="line">    fireEvent.click(element);</span><br><span class="line">    expect(testProps.onClick).not.toHaveBeenCalled();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm test</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°å•å…ƒæµ‹è¯•æˆåŠŸé€šè¿‡ï¼<br><img src="https://upload-images.jianshu.io/upload_images/11846892-04f6282ff0e82886.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>##8.ç»„ä»¶åº“å®ç°æŒ‰éœ€åŠ è½½</p>
<ul>
<li><p>å®‰è£…ä¾èµ–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$npm install node-cmd -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º <code>buildScss.js</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">const cmd = require(&quot;node-cmd&quot;);</span><br><span class="line">const path = require(&quot;path&quot;);</span><br><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">const entryDir = path.resolve(__dirname, &quot;./src/components&quot;);</span><br><span class="line">const outputDir = path.resolve(__dirname, &quot;./dist/components&quot;);</span><br><span class="line">function getScssEntry() &#123;</span><br><span class="line">  let entryMap = &#123;&#125;;</span><br><span class="line">  fs.readdirSync(entryDir).forEach(function (pathName) &#123;</span><br><span class="line">    const entryName = path.resolve(entryDir, pathName);</span><br><span class="line">    const outputName = path.resolve(outputDir, pathName);</span><br><span class="line">    let entryFileName = path.resolve(entryName, &quot;_style.scss&quot;);</span><br><span class="line">    let outputFileName = path.resolve(outputName, &quot;style/index.css&quot;);</span><br><span class="line"></span><br><span class="line">    entryMap[pathName] = &#123;&#125;;</span><br><span class="line">    entryMap[pathName].entry = entryFileName;</span><br><span class="line">    entryMap[pathName].output = outputFileName;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return entryMap;</span><br><span class="line">&#125;</span><br><span class="line">const entry = getScssEntry();</span><br><span class="line">let buildArr = [];</span><br><span class="line">for (const key in entry) &#123;</span><br><span class="line">  const promise = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    cmd.get(`npx node-sass $&#123;entry[key].entry&#125; $&#123;entry[key].output&#125;`, function (</span><br><span class="line">      err,</span><br><span class="line">      data,</span><br><span class="line">      stderr</span><br><span class="line">    ) &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        reject(err);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(&quot;the current working dir is : &quot;, data);</span><br><span class="line">      fs.writeFileSync(</span><br><span class="line">        path.join(__dirname, `./dist/components/$&#123;key&#125;/style/css.js`),</span><br><span class="line">        &quot;import &apos;./index.css&apos;&quot;</span><br><span class="line">      );</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  buildArr.push(promise);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise.all(buildArr)</span><br><span class="line">  .then(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;build success&quot;);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch((e) =&gt; &#123;</span><br><span class="line">    console.log(e);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º <code>_babel.config.js</code>æ–‡ä»¶<br>libraryName:éœ€è¦åŠ è½½çš„åº“ï¼Œæˆ‘è¿™é‡Œçš„æ˜¯echo-rui<br>libraryDirectoryï¼šéœ€è¦åŠ è½½çš„ç»„ä»¶åº“æ‰€åœ¨çš„ç›®å½•ï¼Œå½“å‰çš„ç»„ä»¶æ˜¯å­˜æ”¾åœ¨dist/componentsä¸‹çš„<br>styleï¼šåŠ è½½çš„cssç±»å‹ï¼Œå½“å‰é¡¹ç›®åªæœ‰cssï¼Œæ²¡æœ‰lessï¼Œæ‰€ä»¥è¿™é‡Œå†™csså³å¯ï¼Œå¦‚éœ€é…ç½®less,è¯·çœ‹æ³¨é‡Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  presets: [&quot;react-app&quot;],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      &quot;import&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        libraryName: &quot;echo-rui&quot;, </span><br><span class="line">        camel2DashComponentName: false, // æ˜¯å¦éœ€è¦é©¼å³°è½¬çŸ­çº¿</span><br><span class="line">        camel2UnderlineComponentName: false, // æ˜¯å¦éœ€è¦é©¼å³°è½¬ä¸‹åˆ’çº¿</span><br><span class="line">        libraryDirectory: &quot;dist/components&quot;,</span><br><span class="line">        style: &quot;css&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    // [&quot;import&quot;, &#123;</span><br><span class="line">    //   &quot;libraryName&quot;: &quot;antd&quot;,</span><br><span class="line">    //   &quot;libraryDirectory&quot;: &quot;es&quot;,</span><br><span class="line">    //   &quot;style&quot;: &quot;css&quot; // `style: true` ä¼šåŠ è½½ less æ–‡ä»¶</span><br><span class="line">    // &#125;]</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>âš ï¸âš ï¸âš ï¸é‡è¦è¯´æ˜ï¼šåœ¨å¼€å‘çš„æ—¶å€™ï¼Œæ¯ä¸ªç»„ä»¶ç›®å½•ä¸‹é¢å¿…é¡»æœ‰ä¸€ä¸ª<code>_style.scss</code>æ ·å¼æ–‡ä»¶ï¼Œå³ä½¿ä»–æ˜¯ä¸ªç©ºæ–‡ä»¶ä¹Ÿå¿…é¡»æœ‰ï¼Œå¦åˆ™ä¼šåœ¨æŒ‰éœ€å¼•å…¥çš„æ—¶å€™æŠ¥é”™æ‰¾ä¸åˆ°cssæ–‡ä»¶âš ï¸âš ï¸</p>
<p>##9.storybookæ–‡æ¡£ç”Ÿæˆ</p>
<ol>
<li><p>åˆå§‹åŒ–storyBook</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx -p @storybook/cli sb init</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ ä¾èµ–å’Œæ’ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install @storybook/addon-info --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ npmè„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   ...</span><br><span class="line">   &quot;storybook&quot;: &quot;start-storybook -p 9009 -s public&quot;,</span><br><span class="line">   &quot;build-storybook&quot;: &quot;build-storybook -s public&quot;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®storybookï¼Œæ”¯æŒtypescript</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install react-docgen-typescript-loader -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ storybooké…ç½®æ–‡ä»¶</p>
</li>
</ol>
<ul>
<li><p>æ–°å»º<code>.storybook/webpack.config.js</code>æ–‡ä»¶<br><code>shouldExtractLiteralValuesFromEnum</code>ï¼šstorybookçˆ¬å–ç»„ä»¶å±æ€§çš„æ—¶å€™ä¼šè‡ªåŠ¨æŠŠtypeç±»å‹çš„å±æ€§è‡ªåŠ¨å±•å¼€ã€‚<br><code>propFilter</code>ï¼šè¿‡æ»¤æ‰ä¸éœ€è¦çˆ¬å–çš„å±æ€§çš„æ¥æºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">module.exports = (&#123; config &#125;) =&gt; &#123;</span><br><span class="line">  config.module.rules.push(&#123;</span><br><span class="line">    test: /\.tsx?$/,</span><br><span class="line">    use: [</span><br><span class="line">      &#123;</span><br><span class="line">        loader: require.resolve(&quot;babel-loader&quot;),</span><br><span class="line">        options: &#123;</span><br><span class="line">          presets: [require.resolve(&quot;babel-preset-react-app&quot;)]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, </span><br><span class="line">      &#123;</span><br><span class="line">        loader: require.resolve(&quot;react-docgen-typescript-loader&quot;),</span><br><span class="line">        options: &#123;</span><br><span class="line">          shouldExtractLiteralValuesFromEnum: true,</span><br><span class="line">          propFilter: (prop) =&gt; &#123;</span><br><span class="line">            if (prop.parent) &#123;</span><br><span class="line">              return !prop.parent.fileName.includes(&apos;node_modules&apos;)</span><br><span class="line">            &#125;</span><br><span class="line">            return true            </span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  config.resolve.extensions.push(&quot;.ts&quot;, &quot;.tsx&quot;);</span><br><span class="line"></span><br><span class="line">  return config;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º<code>.storybook/style.scss</code>æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// è¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯å¯¹storybookæ–‡æ¡£æ ·å¼çš„é…ç½®</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º<code>.storybook/config.tsx</code>æ–‡ä»¶<br>é…ç½®æ’ä»¶ä»¥åŠéœ€è¦åŠ è½½çš„æ–‡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import &#123; configure,addDecorator,addParameters &#125; from &apos;@storybook/react&apos;;</span><br><span class="line">import &#123; withInfo &#125; from &apos;@storybook/addon-info&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import &apos;../src/styles/index.scss&apos;</span><br><span class="line">import &apos;./style.scss&apos;</span><br><span class="line">import React from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">const wrapperStyle: React.CSSProperties = &#123;</span><br><span class="line">  padding: &apos;20px 40px&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const storyWrapper = (stroyFn: any) =&gt; (</span><br><span class="line">  &lt;div style=&#123;wrapperStyle&#125;&gt;</span><br><span class="line">    &lt;h3&gt;ç»„ä»¶æ¼”ç¤º&lt;/h3&gt;</span><br><span class="line">    &#123;stroyFn()&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line">addDecorator(storyWrapper)</span><br><span class="line">addDecorator(withInfo)</span><br><span class="line">addParameters(&#123;info: &#123; inline: true, header: false&#125;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const loaderFn = () =&gt; &#123;</span><br><span class="line">    const allExports = [];</span><br><span class="line">    const req = require.context(&apos;../src/components&apos;, true, /\.stories\.tsx$/);</span><br><span class="line">    req.keys().forEach(fname =&gt; allExports.push(req(fname)));</span><br><span class="line">    return allExports;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">configure(loaderFn, module);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="6">
<li>åœ¨æ¯ä¸ªç»„ä»¶ç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ª<code>.stories.tsx</code>ç»“å°¾çš„æ–‡ä»¶</li>
</ol>
<ul>
<li>buttonç»„ä»¶ä¸‹æ–°å»º<code>button.stories.tsx</code>æ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import &#123; storiesOf &#125; from &apos;@storybook/react&apos;;</span><br><span class="line">import &#123; action &#125; from &apos;@storybook/addon-actions&apos;;</span><br><span class="line"></span><br><span class="line">import Button from &apos;./button&apos;</span><br><span class="line"></span><br><span class="line">const defaultButton = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Button onClick=&#123;action(&apos;default button&apos;)&#125;&gt;default button&lt;/Button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const buttonWithSize = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Button size=&apos;lg&apos; btnType=&apos;primary&apos; onClick=&#123;action(&apos;lg button&apos;)&#125;&gt;lg button&lt;/Button&gt;</span><br><span class="line">        &lt;Button className=&apos;ml-20&apos; size=&apos;sm&apos; btnType=&apos;danger&apos; onClick=&#123;action(&apos;sm button&apos;)&#125;&gt;sm button&lt;/Button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const buttonWithType = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Button onClick=&#123;action(&apos;danger button&apos;)&#125; btnType=&apos;danger&apos;&gt;danger button&lt;/Button&gt;</span><br><span class="line">        &lt;Button onClick=&#123;action(&apos;primary button&apos;)&#125; className=&apos;ml-20&apos; btnType=&apos;primary&apos;&gt;primary button&lt;/Button&gt;</span><br><span class="line">        &lt;Button onClick=&#123;action(&apos;link&apos;)&#125; className=&apos;ml-20&apos; btnType=&apos;link&apos; href=&apos;https://www.baidu.com/&apos;&gt;link&lt;/Button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const buttonWithDisabled = () =&gt; (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Button onClick=&#123;action(&apos;disabled button&apos;)&#125; btnType=&apos;danger&apos; disabled=&#123;true&#125;&gt;disabled button&lt;/Button&gt;</span><br><span class="line">        &lt;Button onClick=&#123;action(&apos;unDisabled button&apos;)&#125; className=&apos;ml-20&apos; btnType=&apos;primary&apos;&gt;unDisabled button&lt;/Button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// storiesOf(&apos;Buttonç»„ä»¶&apos;, module)</span><br><span class="line">// .addDecorator(withInfo)</span><br><span class="line">// .addParameters(&#123;</span><br><span class="line">//     info:&#123;</span><br><span class="line">//         text:`</span><br><span class="line">//         è¿™æ˜¯é»˜è®¤ç»„ä»¶</span><br><span class="line">//         ~~~js</span><br><span class="line">//         const a = 12</span><br><span class="line">//         ~~~</span><br><span class="line">//         `,</span><br><span class="line">//         inline:true</span><br><span class="line">//     &#125;</span><br><span class="line">// &#125;)</span><br><span class="line">//   .add(&apos;é»˜è®¤ Button&apos;, defaultButton)</span><br><span class="line">//   .add(&apos;ä¸åŒå°ºå¯¸ Button&apos;, buttonWithSize,&#123;info:&#123;inline:false&#125;&#125;)</span><br><span class="line">//   .add(&apos;ä¸åŒç±»å‹ Button&apos;, buttonWithType)</span><br><span class="line"></span><br><span class="line">storiesOf(&apos;Button æŒ‰é’®&apos;, module)</span><br><span class="line">    .addParameters(&#123;</span><br><span class="line">        info: &#123;</span><br><span class="line">            text: `</span><br><span class="line">        ## å¼•ç”¨æ–¹æ³•</span><br><span class="line">        ~~~js</span><br><span class="line">        import &#123;Button&#125; from ecoh-rui</span><br><span class="line">        ~~~</span><br><span class="line">        `</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .add(&apos;é»˜è®¤ Button&apos;, defaultButton)</span><br><span class="line">    .add(&apos;ä¸åŒå°ºå¯¸ Button&apos;, buttonWithSize)</span><br><span class="line">    .add(&apos;ä¸åŒç±»å‹ Button&apos;, buttonWithType)</span><br><span class="line">    .add(&apos;ç¦ç”¨çš„ Button&apos;,buttonWithDisabled)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>7.æ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run storybook</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ç»ˆç«¯å¯ä»¥çœ‹åˆ°<br><img src="https://upload-images.jianshu.io/upload_images/11846892-8b43e51f15d70e6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>æµè§ˆå™¨æ‰“å¼€<code>http://localhost:9009/</code>,å¯ä»¥çœ‹åˆ°ç»„ä»¶åº“æ–‡æ¡£ç”Ÿæˆäº†ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/11846892-151907d5b1ed9637.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="10-typescriptç¼–è¯‘é…ç½®"><a href="#10-typescriptç¼–è¯‘é…ç½®" class="headerlink" title="10. typescriptç¼–è¯‘é…ç½®"></a>10. typescriptç¼–è¯‘é…ç½®</h2><p>æ–°å»º<code>tsconfig.build.json</code>æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">    // è¾“å‡ºè·¯å¾„</span><br><span class="line">    &quot;outDir&quot;: &quot;dist&quot;,</span><br><span class="line">    // æ‰“åŒ…æ¨¡å—è§„èŒƒ</span><br><span class="line">    &quot;module&quot;: &quot;esnext&quot;,</span><br><span class="line">    // æ„å»ºç›®æ ‡</span><br><span class="line">    &quot;target&quot;: &quot;es5&quot;,</span><br><span class="line">    // ç”Ÿæˆå®šä¹‰æ–‡ä»¶d.ts</span><br><span class="line">    &quot;declaration&quot;: true,</span><br><span class="line">    &quot;jsx&quot;: &quot;react&quot;,</span><br><span class="line">    // æ¨¡å—å¼•å…¥ç­–ç•¥</span><br><span class="line">    &quot;moduleResolution&quot;: &quot;Node&quot;,</span><br><span class="line">    // å…è®¸import React from &apos;react&apos;è¿™æ ·å¯¼åŒ…</span><br><span class="line">    &quot;allowSyntheticDefaultImports&quot;: true</span><br><span class="line">  &#125;,</span><br><span class="line">  // éœ€è¦ç¼–è¯‘çš„ç›®å½•</span><br><span class="line">  &quot;include&quot;: [&quot;src&quot;],</span><br><span class="line">  // ä¸éœ€è¦ç¼–è¯‘çš„</span><br><span class="line">  &quot;exclude&quot;: [&quot;src/**/*.test.tsx&quot;, &quot;src/**/*.stories.tsx&quot;, &quot;src/setupTests.ts&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="11-package-jsonç›¸å…³é…ç½®"><a href="#11-package-jsonç›¸å…³é…ç½®" class="headerlink" title="11. package.jsonç›¸å…³é…ç½®"></a>11. package.jsonç›¸å…³é…ç½®</h2><ul>
<li><p>å°†ä¾èµ–åŒ…ä»dependenciesæ¬åˆ°devDependencie</p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ<br>ä¸€ã€æ˜¯é˜²æ­¢å‘å¸ƒç»„ä»¶åº“ä¹‹ååˆ«äººä½¿ç”¨äº†è·Ÿæˆ‘ä»¬ä¸ä¸€æ ·çš„reactç‰ˆæœ¬é€ æˆå†²çª<br>äºŒã€æ˜¯æˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™è¿˜éœ€è¦ä½¿ç”¨åˆ°reactå’Œreact-domï¼Œæ‰€ä»¥ä¸èƒ½åˆ é™¤ï¼Œåªèƒ½æ¬åˆ°devDependencies<br>ä¸‰ã€è¿˜æœ‰ä¸€äº›è·Ÿå‘å¸ƒåçš„ç»„ä»¶åº“ä¸ç›¸å…³çš„ä¾èµ–éƒ½éœ€è¦æ¬åˆ°devDependenciesï¼Œä¾‹å¦‚storybookç­‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// å˜¿å˜¿ï¼Œç§»åŠ¨ä¹‹åï¼Œå‘ç°ä¸ºç©ºäº†ï¼Œé‡æ–°install äº†ä¸€ä¸‹</span><br><span class="line">// è¿è¡Œäº†npm start å’Œnpm run test å’Œnpm run storybookå‘ç°ä¸€åˆ‡æ­£å¸¸ï¼Œå¼€å¿ƒä¸€ä¸‹ï¼ï¼</span><br><span class="line">&quot;dependencies&quot;: &#123;&#125;,</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>æ·»åŠ npmå‘å¸ƒç›¸å…³é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&quot;description&quot;: &quot;react components library&quot;,</span><br><span class="line">&quot;author&quot;: &quot;echo&quot;,</span><br><span class="line">&quot;private&quot;: false,</span><br><span class="line">// ä¸»å…¥å£</span><br><span class="line">&quot;main&quot;: &quot;dist/index.js&quot;,</span><br><span class="line">// æ¨¡å—å…¥å£</span><br><span class="line">&quot;module&quot;: &quot;dist/index.js&quot;,</span><br><span class="line">// ç±»å‹æ–‡ä»¶å£°æ˜</span><br><span class="line">&quot;types&quot;: &quot;dist/index.d.ts&quot;,</span><br><span class="line">&quot;license&quot;: &quot;MIT&quot;,</span><br><span class="line">// å…³é”®è¯</span><br><span class="line">&quot;keywords&quot;: [</span><br><span class="line">    &quot;React&quot;,</span><br><span class="line">    &quot;UI&quot;,</span><br><span class="line">    &quot;Component&quot;,</span><br><span class="line">    &quot;typescript&quot;</span><br><span class="line">  ],</span><br><span class="line">// é¦–é¡µä½ çš„githubåœ°å€</span><br><span class="line">  &quot;homepage&quot;: &quot;https://github.com/.../echo-rui&quot;,</span><br><span class="line">// ä»“åº“åœ°å€</span><br><span class="line">  &quot;repository&quot;: &#123;</span><br><span class="line">    &quot;type&quot;: &quot;git&quot;,</span><br><span class="line">    &quot;url&quot;: &quot;https://github.com/.../echo-ruii&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  // éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸å†™å°±é»˜è®¤ä»¥.gitignoreä¸ºå‡†</span><br><span class="line">  &quot;files&quot;: [</span><br><span class="line">    &quot;dist&quot;</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»£ç æäº¤gitå‰æ£€æŸ¥ã€‚è¿™é‡Œä½¿ç”¨huskyè¿™ä¸ªå·¥å…·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;husky&quot;: &#123;</span><br><span class="line">    &quot;hooks&quot;: &#123;</span><br><span class="line">    // ç”¨gitæäº¤ä»£ç ä¹‹å‰</span><br><span class="line">      &quot;pre-commit&quot;: &quot;npm run test:nowatch &amp;&amp; npm run lint&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   ...</span><br><span class="line">    &quot;lint&quot;: &quot;eslint --ext js,ts,tsx src --fix --max-warnings 5&quot;,</span><br><span class="line">    &quot;test:nowatch&quot;: &quot;cross-env CI=true react-scripts test&quot;,</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ æ‰“åŒ…å‘å¸ƒç›¸å…³é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   ...</span><br><span class="line">    &quot;clean&quot;: &quot;rimraf ./dist&quot;,</span><br><span class="line">    &quot;build-ts&quot;: &quot;tsc -p tsconfig.build.json&quot;,</span><br><span class="line">    &quot;build-css&quot;: &quot;node-sass ./src/styles/index.scss ./dist/index.css&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;npm run clean &amp;&amp; npm run build-ts &amp;&amp; npm run build-css &amp;&amp; node ./buildScss.js&quot;,</span><br><span class="line">    &quot;prepublishOnly&quot;: &quot;npm run lint &amp;&amp; npm run build&quot;</span><br><span class="line">  </span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ­¤æ—¶æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œå°±å¯ä»¥æˆåŠŸæ ¹æ®é…ç½®æ‰“åŒ…äº†ã€‚</p>
<h2 id="12-å‘å¸ƒåˆ°npm"><a href="#12-å‘å¸ƒåˆ°npm" class="headerlink" title="12. å‘å¸ƒåˆ°npm"></a>12. å‘å¸ƒåˆ°npm</h2><p>ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ å‘å¸ƒã€‚</p>
<ul>
<li>å®Œå–„ä¸€ä¸‹ README.md æ–‡æ¡£ï¼Œè¿™ä¸ªéšä¾¿å†™ä¸¤å¥å°±å¥½</li>
<li>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª .npmignore æ–‡ä»¶ï¼Œå†…å®¹å’Œ .gitignore å·®ä¸å¤šï¼š<pre><code>
</code></pre>æœ€åæ‰§è¡Œ npm login ç™»å…¥ npm è´¦å·ï¼Œå†æ‰§è¡Œ npm publish å‘å¸ƒå³å¯ï¼Œå°±è¿™ä¹ˆç®€å•çš„ä¸¤æ­¥å°±å¯ä»¥ï¼Œè¿‡ä¸€ä¼šåœ¨ npm ä¸Šå°±èƒ½æœåˆ°äº†ã€‚å½“ç„¶å‰ææ˜¯ä½ æœ‰ä¸ª npm è´¦å·ï¼Œæ²¡æœ‰çš„è¯å»æ³¨å†Œä¸€ä¸ªå§ï¼Œå¾ˆ easy çš„ï¼Œç„¶åè¿˜è¦æœä¸‹ä½ çš„ npm åŒ…åæ˜¯å¦æœ‰äººç”¨ï¼Œæœ‰çš„è¯å°±æ¢ä¸€ä¸ªã€‚</li>
</ul>
<h1 id="æ€»ç»“ï¼šå®Œç¾ï¼"><a href="#æ€»ç»“ï¼šå®Œç¾ï¼" class="headerlink" title="æ€»ç»“ï¼šå®Œç¾ï¼"></a>æ€»ç»“ï¼šå®Œç¾ï¼</h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/08/npmReactBuild/" data-id="ckd4b4q27001mt2p31iynb75s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm-react-typescript/">npm react typescript</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog-hexo/">blog-hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6-vue/">es6, vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm-react-typescript/">npm react typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-test/">vue test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue-vueRouter/">vue, vueRouter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‰ç«¯é¢è¯•é¢˜/">å‰ç«¯é¢è¯•é¢˜</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/blog-hexo/" style="font-size: 13.33px;">blog-hexo</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/es6/" style="font-size: 10px;">es6</a> <a href="/tags/es6-vue/" style="font-size: 10px;">es6, vue</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/js/" style="font-size: 13.33px;">js</a> <a href="/tags/node/" style="font-size: 13.33px;">node</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/npm-react-typescript/" style="font-size: 10px;">npm react typescript</a> <a href="/tags/vue/" style="font-size: 20px;">vue</a> <a href="/tags/vue-test/" style="font-size: 10px;">vue test</a> <a href="/tags/vue-vueRouter/" style="font-size: 10px;">vue, vueRouter</a> <a href="/tags/web/" style="font-size: 13.33px;">web</a> <a href="/tags/å‰ç«¯é¢è¯•é¢˜/" style="font-size: 16.67px;">å‰ç«¯é¢è¯•é¢˜</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/27/vueI18/">vueé¡¹ç›®ä¸­å¼•å…¥&amp;ä½¿ç”¨å›½é™…åŒ–</a>
          </li>
        
          <li>
            <a href="/2020/07/27/fixProject/">å¦‚ä½•ä¼˜åŒ–é¡¹ç›®</a>
          </li>
        
          <li>
            <a href="/2020/07/27/axios1/">Axiosæºç è§£æ</a>
          </li>
        
          <li>
            <a href="/2020/07/27/reactCom2/">ä½¿ç”¨reactæ­å»ºç»„ä»¶åº“--radioç»„ä»¶</a>
          </li>
        
          <li>
            <a href="/2020/07/27/reactCom1/">ä½¿ç”¨reactæ­å»ºç»„ä»¶åº“--iconç»„ä»¶</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>